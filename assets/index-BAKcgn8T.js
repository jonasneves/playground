const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ChatApp-Da7qTX4a.js","assets/react-vendor-D74daRuX.js","assets/vendor-GYNWQ9K3.js","assets/state-DiVqNZBa.js","assets/useLocalStorage-NLVDlQHh.js","assets/usePerformanceMonitor-CrJkCt1D.js","assets/CMSApp-BSwQ6wDy.js","assets/index-alUbM9M6.js","assets/Dashboard-D22QVhtV.js","assets/FileBrowser-BZ1W5L0p.js","assets/TodoApp-CEF2BXg3.js","assets/SettingsApp-CYH-9EGw.js","assets/MedicalViz-eU6avp_i.js"])))=>i.map(i=>d[i]);
import{c as z,r as c,j as e,u as T,G as U,C as ne,H as W,R as ae,S as oe,T as le,L as ie,a as F,A as ce,b as de,X as ue,d as me,e as M,P as he,f as pe,g as xe,N as fe,h as ge,i as be}from"./react-vendor-D74daRuX.js";import{p as G}from"./state-DiVqNZBa.js";import"./vendor-GYNWQ9K3.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function l(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=l(r);fetch(r.href,s)}})();function je(n="auth-storage"){return z()(G(t=>({token:null,user:null,isAuthenticated:!1,setAuth:(l,i)=>t({token:l,user:i,isAuthenticated:!0}),logout:()=>{t({token:null,user:null,isAuthenticated:!1}),localStorage.clear(),window.location.href="/"}}),{name:n}))}function ye(n=3e5){return z()((t,l)=>({cacheTimeout:n,getCache:(i,r,s)=>{const a=`gh_${i}_${r}_${s}`,o=localStorage.getItem(a);if(!o)return null;try{const p=JSON.parse(o);return Date.now()-p.timestamp>l().cacheTimeout?(localStorage.removeItem(a),null):p}catch{return null}},setCache:(i,r,s,a,o)=>{const p=`gh_${i}_${r}_${s}`;try{localStorage.setItem(p,JSON.stringify({content:a,sha:o,timestamp:Date.now()}))}catch(m){console.warn("Cache storage failed:",m)}},clearCache:(i,r)=>{const s=`gh_${i}_${r}_`;Object.keys(localStorage).filter(o=>o.startsWith(s)).forEach(o=>localStorage.removeItem(o))},invalidateCache:(i,r,s)=>{const a=`gh_${i}_${r}_${s}`;localStorage.removeItem(a)}}))}function we(n="analytics-storage",t={enabled:!0,maxEvents:100}){return z()(G((l,i)=>({events:[],errors:[],metrics:[],track:(r,s={})=>{if(!t.enabled)return;const a={type:r,data:s,timestamp:Date.now()};l(o=>({events:[...o.events.slice(-(t.maxEvents-1)),a]})),console.log("[Analytics]",r,s)},logError:r=>{t.enabled&&(console.error("[Analytics] Error logged:",r),l(s=>({errors:[...s.errors.slice(-99),r]})))},trackMetric:(r,s,a,o)=>{if(!t.enabled)return;const p=o?a>o:!1,m={appName:r,metricName:s,duration:a,timestamp:Date.now(),threshold:o,exceedsThreshold:p};p&&console.warn(`[${r}] ${s} exceeded threshold: ${a.toFixed(2)}ms > ${o}ms`),l(u=>({metrics:[...u.metrics.slice(-999),m]}))},clearMetrics:()=>l({metrics:[]}),clearErrors:()=>l({errors:[]}),getMetricStats:(r,s)=>{const a=i().metrics.filter(m=>m.appName===r&&m.metricName===s);if(a.length===0)return null;const o=a.map(m=>m.duration),p=a.filter(m=>m.exceedsThreshold).length;return{count:a.length,average:o.reduce((m,u)=>m+u,0)/o.length,min:Math.min(...o),max:Math.max(...o),exceedCount:p}}}),{name:n,partialize:l=>({events:l.events.slice(-50),metrics:l.metrics.slice(-100),errors:l.errors.slice(-20)})}))}function ve(n="repository-storage"){return z()(G(t=>({repository:null,setRepository:l=>t({repository:l}),clearRepository:()=>t({repository:null})}),{name:n}))}const J=c.createContext(null);function Ne({children:n}){const[t,l]=c.useState([]),i=c.useCallback(()=>{l([])},[]);return e.jsx(J.Provider,{value:{customItems:t,setCustomItems:l,clearCustomItems:i},children:n})}function Se(){const n=c.useContext(J);if(!n)throw new Error("useUserMenu must be used within UserMenuProvider");return n}function Ee({children:n,oauthServiceUrl:t,onAuthChange:l}){const[i,r]=c.useState(!0),[s,a]=c.useState(!1),[o,p]=c.useState(!1);c.useEffect(()=>{const u=new URLSearchParams(window.location.search),f=u.has("token")||u.has("error"),d=localStorage.getItem("gh_token");if(!f&&!d){r(!1);return}const x=document.createElement("script");return x.src=`${t}/github-auth.js?v=${Date.now()}`,x.async=!0,x.onload=()=>{setTimeout(()=>{window.GitHubAuth?a(!0):(console.error("GitHubAuth not available after script load"),r(!1))},100)},x.onerror=()=>{console.error("Failed to load OAuth script"),r(!1)},document.head.appendChild(x),()=>{document.head.contains(x)&&document.head.removeChild(x)}},[t]),c.useEffect(()=>{if(!s)return;const u=new URLSearchParams(window.location.search),f=u.has("token")||u.has("error");if(window.GitHubAuth.isAuthenticated()){const d=window.GitHubAuth.getUser(),x=window.GitHubAuth.getToken();d&&x&&setTimeout(()=>{l(x,d),r(!1)},0)}else f&&(window.GitHubAuth.init({scope:"repo",autoRedirect:!1,onLogin:d=>{const x=window.GitHubAuth.getUser();x&&setTimeout(()=>{l(d,x),r(!1)},0)}}),p(!0)),r(!1)},[s,l]);const m=async()=>{if(s)!o&&window.GitHubAuth&&(await window.GitHubAuth.init({scope:"repo",autoRedirect:!1,onLogin:u=>{const f=window.GitHubAuth.getUser();f&&setTimeout(()=>{l(u,f)},0)}}),p(!0)),window.GitHubAuth.login();else{r(!0);const u=document.createElement("script");u.src=`${t}/github-auth.js?v=${Date.now()}`,u.async=!0,u.onload=()=>{setTimeout(async()=>{window.GitHubAuth&&(await window.GitHubAuth.init({scope:"repo",autoRedirect:!1,onLogin:f=>{const d=window.GitHubAuth.getUser();d&&setTimeout(()=>{l(f,d)},0)}}),window.GitHubAuth.login())},100)},document.head.appendChild(u)}};return i?e.jsx("div",{className:"loading",children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{border:"4px solid rgba(255,255,255,0.3)",borderRadius:"50%",borderTopColor:"white",width:"50px",height:"50px",animation:"spin 1s linear infinite",margin:"0 auto 20px"}}),e.jsx("p",{children:"Initializing..."})]})}):e.jsx(e.Fragment,{children:n(m)})}function L({user:n,onLogin:t,onLogout:l,onClearCache:i}){const[r,s]=c.useState(!1),a=c.useRef(null),o=T(),{customItems:p}=Se();c.useEffect(()=>{function d(w){a.current&&!a.current.contains(w.target)&&s(!1)}function x(w){w.key==="Escape"&&s(!1)}if(r)return document.addEventListener("mousedown",d),document.addEventListener("keydown",x),()=>{document.removeEventListener("mousedown",d),document.removeEventListener("keydown",x)}},[r]);const m=()=>{confirm("Clear all cached data? Apps will reload from the repository.")&&(i(),window.location.reload())},u=()=>{s(!1),o("/settings")},f=()=>{s(!1),o("/gallery",{replace:!0})};return e.jsxs("div",{ref:a,className:"fixed top-4 right-6 z-50",children:[e.jsx("button",{onClick:()=>s(!r),"aria-label":"Open user menu","aria-expanded":r,className:"group relative flex items-center bg-white/80 backdrop-blur-md border border-neutral-200 rounded-full py-1 px-1 hover:pr-3 hover:bg-white transition-[padding,background-color] duration-300 ease-out shadow-sm",children:n?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:n.avatar_url,alt:n.login,loading:"lazy",className:"w-9 h-9 rounded-full flex-shrink-0 object-cover"}),e.jsxs("div",{className:"flex flex-col max-w-0 group-hover:max-w-[150px] overflow-hidden opacity-0 group-hover:opacity-100 transition-[max-width,opacity] duration-300 ease-out group-hover:ml-2",children:[e.jsx("span",{className:"text-sm font-medium text-neutral-900 whitespace-nowrap leading-tight",children:n.name||n.login}),e.jsxs("span",{className:"text-xs text-neutral-500 whitespace-nowrap leading-tight",children:["@",n.login]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-neutral-100 flex items-center justify-center flex-shrink-0",children:e.jsx(U,{size:18,className:"text-neutral-600"})}),e.jsx(ne,{size:14,className:"absolute -top-0.5 -right-0.5 text-amber-500 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),e.jsx("span",{className:"text-sm font-medium text-neutral-600 whitespace-nowrap max-w-0 group-hover:max-w-[120px] overflow-hidden opacity-0 group-hover:opacity-100 transition-[max-width,opacity] duration-300 ease-out group-hover:ml-2",children:"Not logged in"})]})}),e.jsxs("div",{className:`absolute top-14 right-0 bg-white border border-neutral-200 rounded-2xl shadow-xl min-w-[200px] overflow-hidden transition-all duration-100 ${r?"opacity-100 visible translate-y-0":"opacity-0 invisible -translate-y-2"}`,children:[e.jsxs("button",{onClick:f,"aria-label":"Go to app gallery",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors",children:[e.jsx(W,{size:16})," Gallery"]}),e.jsxs("button",{onClick:()=>window.location.reload(),"aria-label":"Refresh page",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors border-t border-neutral-100",children:[e.jsx(ae,{size:16})," Refresh"]}),n&&e.jsxs("button",{onClick:u,"aria-label":"Open settings",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors border-t border-neutral-100",children:[e.jsx(oe,{size:16})," Settings"]}),p.length>0&&e.jsx(e.Fragment,{children:p.map(d=>d.component?e.jsx("div",{className:"border-t border-neutral-100",children:d.component},d.id):e.jsxs("button",{onClick:()=>{d.onClick(),s(!1)},className:`w-full flex items-center gap-3 px-4 py-3 text-sm transition-colors border-t border-neutral-100 ${d.variant==="danger"?"text-red-600 hover:bg-red-50":"text-neutral-700 hover:bg-neutral-50"}`,children:[d.icon&&e.jsx(d.icon,{size:16}),d.label]},d.id))}),e.jsxs("button",{onClick:m,"aria-label":"Clear cache",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors border-t border-neutral-100",children:[e.jsx(le,{size:16})," Clear Cache"]}),n?e.jsxs("button",{onClick:l,"aria-label":"Log out",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors border-t border-neutral-100",children:[e.jsx(ie,{size:16})," Logout"]}):t?e.jsxs("button",{onClick:()=>{t(),s(!1)},"aria-label":"Sign in with GitHub",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-brand-600 hover:bg-brand-50 transition-colors border-t border-neutral-100",children:[e.jsx(U,{size:16})," Sign in with GitHub"]}):null]})]})}function K(n,t){return t?n.split(new RegExp(`(${t})`,"gi")).map((i,r)=>i.toLowerCase()===t.toLowerCase()?e.jsx("mark",{className:"bg-yellow-200 text-neutral-900",children:i},r):i):n}function ke({appName:n,manifest:t,path:l,onLaunch:i,isSelected:r=!1,searchTerm:s="",isLocked:a=!1}){return t?e.jsxs("div",{className:`bg-white rounded-xl border ${r?"border-brand-500 ring-2 ring-brand-200":"border-neutral-200"} shadow-sm hover:shadow-md hover:-translate-y-0.5 transition-all duration-150 overflow-hidden group flex flex-col h-full ${a?"opacity-60":""}`,children:[e.jsxs("div",{className:`w-full bg-gradient-to-br from-brand-50 to-neutral-50 flex items-center justify-center ${t.thumbnail?"h-32":"h-20"} relative`,children:[a&&e.jsx("div",{className:"absolute inset-0 bg-black/10 flex items-center justify-center backdrop-blur-[1px]",children:e.jsx(F,{size:24,className:"text-neutral-600"})}),t.thumbnail?e.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-full h-full object-cover",onError:o=>{o.currentTarget.style.display="none"}}):e.jsx("div",{className:"text-4xl text-neutral-400",children:t.name.charAt(0)})]}),e.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[e.jsx("h3",{className:"text-base font-semibold text-neutral-900 mb-1",children:K(t.name,s)}),e.jsx("p",{className:"text-neutral-600 text-xs leading-relaxed mb-3 line-clamp-2",children:K(t.description||"",s)}),t.tech&&t.tech.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:t.tech.map(o=>e.jsx("span",{className:"bg-neutral-100 text-neutral-700 px-2 py-0.5 rounded-full text-[10px] font-medium",children:o},o))}),e.jsx("button",{onClick:()=>!a&&i(l,t.name),"aria-label":a?"Sign in to launch app":`Launch ${t.name} app`,disabled:a,className:`inline-flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg font-medium text-xs transition-all duration-150 mt-auto ${a?"bg-neutral-200 text-neutral-600 cursor-not-allowed":"bg-gradient-to-r from-brand-600 to-brand-700 hover:from-brand-700 hover:to-brand-800 text-white group-hover:gap-2"}`,children:a?e.jsxs(e.Fragment,{children:[e.jsx(F,{size:14}),"Sign in to launch"]}):e.jsxs(e.Fragment,{children:["Launch App",e.jsx(ce,{size:14,className:"transition-transform duration-150"})]})})]})]}):e.jsx("div",{className:"bg-white rounded-2xl border border-neutral-200 shadow-sm overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-neutral-900 mb-2",children:n}),e.jsx("p",{className:"text-neutral-400",children:"Loading..."})]})})}function Ae({options:n,value:t,onChange:l}){return e.jsx("div",{className:"inline-flex bg-neutral-100 rounded-full p-1 gap-1",children:n.map(i=>e.jsx("button",{onClick:()=>l(i.value),className:`px-6 py-2 rounded-full text-sm font-medium transition-all duration-100 ${t===i.value?"bg-white text-neutral-900 shadow-sm":"text-neutral-500 hover:text-neutral-700"}`,children:i.label},i.value))})}const Ce={todo:"productivity",dashboard:"productivity",settings:"productivity",cms:"content","file-browser":"content",chat:"productivity","medical-viz":"content"},B=()=>e.jsx("div",{className:"fixed top-[70%] left-[75%] -translate-x-1/2 -translate-y-1/2 w-[300px] h-[300px] sm:w-[600px] sm:h-[600px] rounded-full bg-brand-500 blur-[100px] sm:blur-[150px] opacity-40 animate-breathe pointer-events-none"}),Re=()=>e.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 shadow-sm overflow-hidden animate-pulse",children:[e.jsx("div",{className:"w-full h-20 bg-gradient-to-br from-neutral-100 to-neutral-50"}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-neutral-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-neutral-200 rounded w-full mb-1"}),e.jsx("div",{className:"h-3 bg-neutral-200 rounded w-2/3 mb-3"}),e.jsxs("div",{className:"flex gap-1.5 mb-3",children:[e.jsx("div",{className:"h-5 bg-neutral-200 rounded-full w-12"}),e.jsx("div",{className:"h-5 bg-neutral-200 rounded-full w-16"})]}),e.jsx("div",{className:"h-8 bg-neutral-200 rounded-lg w-full"})]})]}),_e=({onClose:n})=>e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:n,children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4 shadow-2xl",onClick:t=>t.stopPropagation(),children:[e.jsx("h2",{className:"text-xl font-semibold text-neutral-900 mb-4",children:"Keyboard Shortcuts"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-neutral-600",children:"Start typing"}),e.jsx("kbd",{className:"bg-neutral-100 text-neutral-900 px-2 py-1 rounded text-sm font-mono",children:"Any key"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-neutral-600",children:"Clear search"}),e.jsx("kbd",{className:"bg-neutral-100 text-neutral-900 px-2 py-1 rounded text-sm font-mono",children:"Esc"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-neutral-600",children:"Navigate apps"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("kbd",{className:"bg-neutral-100 text-neutral-900 px-2 py-1 rounded text-sm font-mono",children:"↑"}),e.jsx("kbd",{className:"bg-neutral-100 text-neutral-900 px-2 py-1 rounded text-sm font-mono",children:"↓"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-neutral-600",children:"Launch app"}),e.jsx("kbd",{className:"bg-neutral-100 text-neutral-900 px-2 py-1 rounded text-sm font-mono",children:"Enter"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-neutral-600",children:"Show shortcuts"}),e.jsx("kbd",{className:"bg-neutral-100 text-neutral-900 px-2 py-1 rounded text-sm font-mono",children:"?"})]})]}),e.jsx("button",{onClick:n,className:"mt-6 w-full bg-brand-600 hover:bg-brand-700 text-white py-2 rounded-lg font-medium transition-colors",children:"Close"})]})}),V=({title:n,subtitle:t})=>e.jsxs("header",{className:"pt-6 pb-8",children:[e.jsxs("h1",{className:"text-2xl font-semibold text-neutral-900 flex items-center gap-2 mb-1",children:[e.jsx(me,{className:"text-brand-600",size:24}),n]}),e.jsx("p",{className:"text-sm text-neutral-600",children:t})]});function Le({config:n,user:t,onLogin:l,onLogout:i,onClearCache:r,onTrack:s,onNavigate:a}){const[o,p]=c.useState([]),[m,u]=c.useState(!0),[f,d]=c.useState(null),[x,w]=c.useState("all"),[C,P]=c.useState(""),[v,te]=c.useState(""),[R,I]=c.useState(-1),[O,$]=c.useState(!1),[A,H]=c.useState([]),_=c.useRef(null);c.useEffect(()=>{async function g(){try{const y=await fetch("/apps-registry.json");if(!y.ok)throw new Error("Failed to load apps registry");const j=await y.json();p(j.apps)}catch(y){d(y instanceof Error?y.message:"Unknown error")}finally{u(!1)}}g();const h=localStorage.getItem("recentApps");h&&H(JSON.parse(h))},[]),c.useEffect(()=>{const g=setTimeout(()=>te(C),300);return()=>clearTimeout(g)},[C]),c.useEffect(()=>{I(-1)},[v,x]);const D=c.useCallback((g,h)=>{s?.("app_launch",{appName:h,appPath:g});const y=o.find(b=>b.path===g)?.manifest;y?.reactRoute&&a&&a(y.reactRoute);const j=[h,...A.filter(b=>b!==h)].slice(0,5);H(j),localStorage.setItem("recentApps",JSON.stringify(j))},[o,s,a,A]);function re(){P(""),_.current?.focus()}const N=(()=>{const g=o.filter(h=>{const y=Ce[h.name],j=x==="all"||y===x;if(!v)return j;const b=v.toLowerCase(),se=h.name.toLowerCase().includes(b)||h.manifest?.description?.toLowerCase().includes(b);return j&&se});return!v&&A.length>0?g.sort((h,y)=>{const j=A.indexOf(h.name),b=A.indexOf(y.name);return j===-1&&b===-1?0:j===-1?1:b===-1?-1:j-b}):g})();return c.useEffect(()=>{function g(h){const y=h.target,j=y.tagName==="INPUT"||y.tagName==="TEXTAREA"||y.isContentEditable;if(h.key==="Escape"){if(O){$(!1);return}if(j){P(""),_.current?.blur(),I(-1);return}}if(h.key==="?"&&!j&&!h.shiftKey){$(!0);return}if((h.key==="ArrowDown"||h.key==="ArrowUp")&&!j){h.preventDefault(),I(b=>h.key==="ArrowDown"?b<N.length-1?b+1:b:b>0?b-1:-1);return}if(h.key==="Enter"&&R>=0&&!j){h.preventDefault();const b=N[R];b&&D(b.path,b.name);return}!j&&h.key.length===1&&!h.ctrlKey&&!h.metaKey&&!h.altKey&&_.current?.focus()}return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[O,R,N,D]),m&&o.length===0?e.jsxs("div",{className:"relative min-h-screen",children:[e.jsx(B,{}),e.jsx(L,{user:t,onLogin:l,onLogout:i,onClearCache:r}),e.jsxs("div",{className:"relative z-10 container pt-4 pb-20",children:[e.jsx(V,{title:n.branding.title,subtitle:n.branding.subtitle}),e.jsx("div",{className:"mb-8 flex justify-center",children:e.jsx("div",{className:"h-12 bg-neutral-100 rounded-xl w-full max-w-md animate-pulse"})}),e.jsx("div",{className:"grid",children:Array.from({length:6}).map((g,h)=>e.jsx(Re,{},h))})]})]}):f?e.jsxs("div",{className:"relative min-h-screen",children:[e.jsx(L,{user:t,onLogin:l,onLogout:i,onClearCache:r}),e.jsx("div",{className:"container py-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-800 rounded-xl p-6",children:[e.jsx("strong",{className:"font-semibold",children:"Error:"})," ",f]})})]}):e.jsxs("div",{className:"relative min-h-screen",children:[e.jsx(B,{}),e.jsx(L,{user:t,onLogout:i,onClearCache:r}),e.jsxs("div",{className:"relative z-10 container pt-4 pb-20",children:[e.jsx(V,{title:n.branding.title,subtitle:n.branding.subtitle}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(de,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-neutral-400",size:20}),e.jsx("input",{ref:_,type:"text",placeholder:"Type to search apps...",value:C,onChange:g=>P(g.target.value),"aria-label":"Search apps",className:"w-full pl-12 pr-10 py-3 bg-white border border-neutral-200 rounded-xl text-neutral-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all"}),C&&e.jsx("button",{onClick:re,"aria-label":"Clear search",className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-neutral-600 transition-colors",children:e.jsx(ue,{size:18})})]}),e.jsx(Ae,{options:[{value:"all",label:"All"},{value:"productivity",label:"Productivity"},{value:"content",label:"Content"}],value:x,onChange:g=>w(g)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",role:"region","aria-live":"polite","aria-atomic":"true",children:[e.jsxs("p",{className:"text-neutral-600",children:[N.length," ",N.length===1?"app":"apps"]}),!v&&A.length>0&&e.jsx("p",{className:"text-xs text-neutral-500",children:"Recently used shown first"})]})]}),e.jsx("div",{className:"grid",role:"region","aria-label":"Applications",children:N.map((g,h)=>e.jsx(ke,{appName:g.name,manifest:g.manifest,path:g.path,onLaunch:D,isSelected:h===R,searchTerm:v,isLocked:!t},g.name))}),N.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("p",{className:"text-neutral-600 text-lg mb-2",children:"No apps found"}),e.jsx("p",{className:"text-neutral-500 text-sm",children:v?e.jsxs(e.Fragment,{children:["Try adjusting your search or"," ",e.jsx("button",{onClick:()=>w("all"),className:"text-brand-600 hover:text-brand-700 underline",children:"view all categories"})]}):"No apps in this category"})]})]}),O&&e.jsx(_e,{onClose:()=>$(!1)})]})}class ze extends c.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,l){const i={message:t.message,stack:t.stack,componentStack:l.componentStack||void 0,timestamp:Date.now(),appName:this.props.appName};this.props.onError&&this.props.onError(i),console.error("[ErrorBoundary] Caught error:",i)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:"#ef4444",background:"#fef2f2",borderRadius:"8px",margin:"20px"},children:[e.jsx("h2",{style:{margin:"0 0 12px",fontSize:"1.25rem",fontWeight:600},children:"Something went wrong"}),e.jsx("p",{style:{margin:"0 0 16px",color:"#991b1b",fontSize:"0.875rem"},children:this.state.error?.message||"An unexpected error occurred"}),e.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"8px 16px",background:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:500},children:"Reload Page"})]}):this.props.children}}function Te({onSelect:n,currentRepository:t,userLogin:l}){const[i,r]=c.useState(t?.owner||l||""),[s,a]=c.useState(t?.name||""),o=p=>{p.preventDefault(),i.trim()&&s.trim()&&n({owner:i.trim(),name:s.trim()})};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-6 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-16 h-16 bg-brand-100 rounded-2xl mx-auto flex items-center justify-center",children:e.jsx(M,{className:"text-brand-600",size:28})}),e.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Select Repository"}),e.jsx("p",{className:"text-neutral-600",children:"Choose the GitHub repository to use with your apps"})]}),e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-neutral-700 mb-2",children:[e.jsx(he,{size:16}),"Owner"]}),e.jsx("input",{type:"text",value:i,onChange:p=>r(p.target.value),placeholder:l||"username",className:"w-full px-4 py-2.5 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-neutral-700 mb-2",children:[e.jsx(M,{size:16}),"Repository Name"]}),e.jsx("input",{type:"text",value:s,onChange:p=>a(p.target.value),placeholder:"repository-name",className:"w-full px-4 py-2.5 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none transition-all",required:!0})]}),e.jsxs("button",{type:"submit",className:"w-full bg-gradient-to-r from-brand-500 to-brand-600 hover:from-brand-600 hover:to-brand-700 text-white font-medium py-3 px-6 rounded-lg transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[e.jsx(pe,{size:20}),"Confirm Selection"]})]}),e.jsxs("div",{className:"bg-neutral-50 rounded-lg p-4 space-y-2 text-sm",children:[e.jsxs("p",{className:"text-neutral-600",children:[e.jsx("strong",{children:"Example:"})," For github.com/facebook/react"]}),e.jsxs("p",{className:"text-neutral-500 text-xs",children:["Owner: ",e.jsx("code",{className:"bg-white px-2 py-0.5 rounded",children:"facebook"})]}),e.jsxs("p",{className:"text-neutral-500 text-xs",children:["Repository: ",e.jsx("code",{className:"bg-white px-2 py-0.5 rounded",children:"react"})]})]})]})})}const Pe="modulepreload",Ie=function(n){return"/"+n},q={},k=function(t,l,i){let r=Promise.resolve();if(l&&l.length>0){let p=function(m){return Promise.all(m.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");r=p(l.map(m=>{if(m=Ie(m),m in q)return;q[m]=!0;const u=m.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Pe,u||(d.as="script"),d.crossOrigin="",d.href=m,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((x,w)=>{d.addEventListener("load",x),d.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${m}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})},E={version:"1.0.0",repository:{owner:"jonasneves",name:"playground"},getRepository:()=>{const n=localStorage.getItem("repository-storage");if(n)try{const t=JSON.parse(n);if(t.state?.repository)return t.state.repository}catch{}return E.repository},branding:{title:"Playground",subtitle:"Launch and experiment with apps",theme:{primary:"#1e3a5f",secondary:"#2c4f7c"}},features:{analytics:!0,errorTracking:!0,serviceWorker:!1,caching:!0},api:{baseUrl:"https://api.github.com/repos",cacheTimeout:3e5},oauth:{serviceUrl:"https://oauth.neevs.io"}},X=je("auth-storage"),Q=ye(E.api.cacheTimeout),Y=we("analytics-storage",{enabled:E.features.analytics,maxEvents:100}),Z=ve("repository-storage");function Oe(){const n=T();return e.jsx("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center px-6",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("h1",{className:"text-6xl font-bold text-neutral-900 mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-neutral-600 mb-8",children:"Page not found"}),e.jsxs("button",{onClick:()=>n("/"),"aria-label":"Return to home page",className:"inline-flex items-center gap-2 px-6 py-3 bg-brand-600 text-white rounded-xl hover:bg-brand-700 transition-colors",children:[e.jsx(W,{size:20}),"Back to home"]})]})})}function $e(){const n=T(),{user:t,isAuthenticated:l,setAuth:i,logout:r}=X(),{clearCache:s}=Q(),{track:a}=Y(),{repository:o,setRepository:p}=Z(),[m,u]=c.useState(!1);c.useEffect(()=>{l&&!o&&u(!0)},[l,o]);const f=o||E.repository;return e.jsx(Ee,{oauthServiceUrl:E.oauth.serviceUrl,onAuthChange:(d,x)=>{d&&x&&i(d,x)},children:d=>e.jsxs(e.Fragment,{children:[m&&e.jsx(Te,{onSelect:x=>{p(x),u(!1)},currentRepository:o,userLogin:t?.login}),e.jsx(Le,{config:E,user:t,onLogin:d,onLogout:r,onClearCache:()=>s(f.owner,f.name),onTrack:a,onNavigate:x=>n(x)})]})})}const De=c.lazy(()=>k(()=>import("./ChatApp-Da7qTX4a.js"),__vite__mapDeps([0,1,2,3,4,5]))),Ge=c.lazy(()=>k(()=>import("./CMSApp-BSwQ6wDy.js"),__vite__mapDeps([6,1,2,3,7,5]))),He=c.lazy(()=>k(()=>import("./Dashboard-D22QVhtV.js"),__vite__mapDeps([8,1,2,3,7,5]))),Ue=c.lazy(()=>k(()=>import("./FileBrowser-BZ1W5L0p.js"),__vite__mapDeps([9,1,2,3,7,5]))),Fe=c.lazy(()=>k(()=>import("./TodoApp-CEF2BXg3.js"),__vite__mapDeps([10,1,2,3,4]))),Me=c.lazy(()=>k(()=>import("./SettingsApp-CYH-9EGw.js"),__vite__mapDeps([11,1,2,3]))),Ke=c.lazy(()=>k(()=>import("./MedicalViz-eU6avp_i.js"),__vite__mapDeps([12,1,2,3])));function Be(){return e.jsx("div",{className:"loading",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-5 border-4 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("p",{children:"Loading app..."})]})})}function S({appName:n,children:t}){const l=T(),i=Y(u=>u.logError),{user:r,logout:s}=X(),{clearCache:a}=Q(),{repository:o}=Z(),p=o||E.repository,m=()=>{a(p.owner,p.name)};return c.useEffect(()=>{const u=f=>{if(f.key==="Escape"){const d=f.target;if(d.tagName==="INPUT"||d.tagName==="TEXTAREA")return;l("/gallery",{replace:!0})}};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[l]),e.jsxs(e.Fragment,{children:[e.jsx(L,{user:r,onLogout:s,onClearCache:m}),e.jsx(ze,{appName:n,onError:i,children:e.jsx(c.Suspense,{fallback:e.jsx(Be,{}),children:t})})]})}const Ve=xe([{path:"/",element:e.jsx(fe,{to:"/gallery",replace:!0})},{path:"/gallery",element:e.jsx($e,{})},{path:"/apps/chat",element:e.jsx(S,{appName:"chat",children:e.jsx(De,{})})},{path:"/apps/cms",element:e.jsx(S,{appName:"cms",children:e.jsx(Ge,{})})},{path:"/apps/dashboard",element:e.jsx(S,{appName:"dashboard",children:e.jsx(He,{})})},{path:"/apps/file-browser",element:e.jsx(S,{appName:"file-browser",children:e.jsx(Ue,{})})},{path:"/apps/todo",element:e.jsx(S,{appName:"todo",children:e.jsx(Fe,{})})},{path:"/settings",element:e.jsx(S,{appName:"settings",children:e.jsx(Me,{})})},{path:"/apps/medical-viz",element:e.jsx(S,{appName:"medical-viz",children:e.jsx(Ke,{})})},{path:"*",element:e.jsx(Oe,{})}]),ee=document.getElementById("root");if(!ee)throw new Error("Root element not found");ge.createRoot(ee).render(e.jsx(c.StrictMode,{children:e.jsx(Ne,{children:e.jsx(be,{router:Ve})})}));export{E as A,Ae as P,Te as R,Se as a,Z as b,Q as c,Y as d,X as u};
