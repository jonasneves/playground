import{j as e,r as a}from"./react-vendor-CNslD6Mb.js";import{u as v}from"./index-CF9j0e2k.js";import{u as w}from"./usePerformanceMonitor-C8NCg2QX.js";import{A as m}from"./index-Bmu97nT9.js";import"./vendor-7OC5HNn7.js";import"./state-CWLQzQDb.js";function n({title:s,value:l}){return e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 shadow-sm p-6",children:[e.jsx("h3",{className:"text-sm font-medium text-neutral-600 mb-2",children:s}),e.jsx("div",{className:"text-3xl font-semibold text-neutral-900",children:l})]})}function E(){const s=v(m.repository.owner,m.repository.name),{startTimer:l,endTimer:u}=w("dashboard"),[t,p]=a.useState(null),[h,d]=a.useState(!0),[c,x]=a.useState(null);a.useEffect(()=>{i()},[]);const i=async()=>{try{d(!0),x(null),l("data_load_ms");const[o,f,j]=await Promise.all([s.listDirectory(""),s.listDirectory("apps"),s.listDirectory("src")]),g=f.filter(r=>r.type==="dir"),N=j.filter(r=>r.type==="dir"),y=o.filter(r=>r.type==="file").length;u("data_load_ms"),p({appCount:g.length,utilCount:N.length,fileCount:y,lastChecked:new Date})}catch(o){x(o.message)}finally{d(!1)}},b=t?`Repository contains ${t.appCount} apps, ${t.utilCount} source modules, and ${t.fileCount} root files. Last checked: ${t.lastChecked.toLocaleString()}`:"";return h?e.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[e.jsxs("div",{className:"bg-white border-b border-neutral-200 px-6 py-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-semibold text-neutral-900 mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-neutral-600",children:"Repository Statistics"})]}),e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:e.jsx("div",{className:"bg-white rounded-2xl border border-neutral-200 shadow-sm p-6",children:e.jsx("p",{className:"text-center text-neutral-500",children:"Loading..."})})})]}):c?e.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[e.jsxs("div",{className:"bg-white border-b border-neutral-200 px-6 py-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-semibold text-neutral-900 mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-neutral-600",children:"Repository Statistics"})]}),e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 shadow-sm p-6",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error: ",c]}),e.jsx("button",{className:"px-4 py-2 bg-brand-600 hover:bg-brand-700 text-white rounded-lg font-medium text-sm transition-colors",onClick:i,children:"Retry"})]})})]}):e.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[e.jsxs("button",{onClick:i,className:"w-full bg-white border-b border-neutral-200 px-6 py-8 text-center hover:bg-neutral-50 transition-colors duration-100",title:"Click to refresh",children:[e.jsx("h1",{className:"text-3xl font-semibold text-neutral-900 mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-neutral-600",children:"Repository Statistics"})]}),e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(n,{title:"Applications",value:t?.appCount||0}),e.jsx(n,{title:"Source Modules",value:t?.utilCount||0}),e.jsx(n,{title:"Root Files",value:t?.fileCount||0})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900 mb-2",children:"Recent Activity"}),e.jsx("p",{className:"text-sm text-neutral-600 leading-relaxed",children:b})]})]})]})}export{E as default};
