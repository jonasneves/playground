import{u as N,r as m,j as e,S as w,P as S,d as C}from"./react-vendor-CaUiYEua.js";import{u as k,c as R,d as A,b as D,R as E,A as c}from"./index-Bw7IGjP0.js";import"./vendor-GYNWQ9K3.js";import"./state-DiVqNZBa.js";function r({children:s,title:t}){return e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 p-6 space-y-4",children:[e.jsx("h2",{className:"text-base font-semibold text-neutral-700",children:t}),s]})}function a({label:s,value:t,action:l}){return e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-neutral-100 last:border-b-0",children:[e.jsx("span",{className:"text-sm text-neutral-600",children:s}),t&&e.jsx("span",{className:"text-sm text-neutral-900 font-medium",children:t}),l&&e.jsx("button",{onClick:l.onClick,className:`px-4 py-1.5 text-sm font-medium rounded-lg transition-colors ${l.variant==="danger"?"text-red-600 hover:bg-red-50":"text-neutral-700 hover:bg-neutral-100"}`,children:l.label})]})}function L({label:s,used:t,total:l,unit:n="KB"}){const d=Math.min(t/l*100,100);return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-neutral-600",children:s}),e.jsxs("span",{className:"text-neutral-900 font-medium",children:[t.toFixed(1)," ",n," / ",l.toFixed(1)," ",n]})]}),e.jsx("div",{className:"h-2 bg-neutral-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-brand-600 rounded-full transition-all duration-150",style:{width:`${d}%`}})})]})}function B(){const s=N(),{user:t,logout:l}=k(),{clearCache:n}=R(),{metrics:d}=A(),{repository:u,setRepository:g}=D(),[b,h]=m.useState(!1),o=u||c.repository,j=()=>{confirm("Are you sure you want to log out?")&&(l(),s("/"))},p=()=>{confirm("Clear all cached data? This will reload the page.")&&(n(o.owner,o.name),window.location.reload())},f=()=>{confirm("Delete all local data including todos, chat history, and cache? This cannot be undone.")&&(localStorage.clear(),window.location.href="/")},y=m.useMemo(()=>{let i=0;for(const x in localStorage)Object.prototype.hasOwnProperty.call(localStorage,x)&&(i+=localStorage[x].length+x.length);return i/1024},[]),v=5*1024;return e.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[b&&e.jsx(E,{onSelect:i=>{g(i),h(!1),window.location.reload()},currentRepository:u,userLogin:t?.login}),e.jsx("div",{className:"bg-white border-b border-neutral-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-brand-100 rounded-xl flex items-center justify-center",children:e.jsx(w,{className:"text-brand-600",size:22})}),e.jsx("h1",{className:"text-xl font-semibold text-neutral-900",children:"Settings"})]})}),e.jsxs("div",{className:"max-w-2xl mx-auto px-6 py-8 space-y-6",children:[e.jsx(r,{title:"Profile",children:e.jsxs("div",{className:"flex items-center gap-4 py-2",children:[t?.avatar_url?e.jsx("img",{src:t.avatar_url,alt:t.login,loading:"lazy",className:"w-16 h-16 rounded-full ring-2 ring-neutral-200"}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-brand-600 flex items-center justify-center text-white text-2xl font-bold",children:t?.login?.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-neutral-900",children:t?.name||t?.login}),e.jsx("div",{className:"text-sm text-neutral-500",children:t?.email||`@${t?.login}`})]})]})}),e.jsxs(r,{title:"Repository",children:[e.jsx(a,{label:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(S,{size:14}),"Owner"]}),value:o.owner}),e.jsx(a,{label:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(C,{size:14}),"Repository"]}),value:o.name}),e.jsx(a,{label:"Change Repository",action:{label:"Edit",onClick:()=>h(!0)}}),e.jsx(a,{label:"Version",value:c.version})]}),e.jsxs(r,{title:"Storage",children:[e.jsx(L,{label:"Data Usage",used:y,total:v,unit:"KB"}),e.jsx(a,{label:"Cache",action:{label:"Clear Cache",onClick:p}}),e.jsx(a,{label:"Performance Metrics",value:`${Object.keys(d).length} tracked`})]}),e.jsxs(r,{title:"Developer",children:[e.jsx(a,{label:"GitHub Token",value:"••••••••••••••••"}),e.jsx(a,{label:"Analytics",value:c.features.analytics?"Enabled":"Disabled"}),e.jsx(a,{label:"Error Tracking",value:c.features.errorTracking?"Enabled":"Disabled"})]}),e.jsxs(r,{title:"Account",children:[e.jsx(a,{label:"Log out of your account",action:{label:"Log Out",onClick:j}}),e.jsx(a,{label:"Delete all local data",action:{label:"Delete",onClick:f,variant:"danger"}})]})]})]})}export{B as default};
