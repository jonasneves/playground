import{j as e,r as a}from"./react-vendor-ZSESqh15.js";import{u as w}from"./index-Bm8dlDMs.js";import{u as C}from"./usePerformanceMonitor-Cl9nW6Fq.js";import{b as S,A as D}from"./index-CaSabNvm.js";import"./vendor-7OC5HNn7.js";import"./state-CWLQzQDb.js";function c({title:l,value:r}){return e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 shadow-sm p-6",children:[e.jsx("h3",{className:"text-sm font-medium text-neutral-600 mb-2",children:l}),e.jsx("div",{className:"text-3xl font-semibold text-neutral-900",children:r})]})}function _(){const{repository:l}=S(),r=l||D.repository,o=w(r.owner,r.name),{startTimer:m,endTimer:p}=C("dashboard"),[t,h]=a.useState(null),[b,d]=a.useState(!0),[x,u]=a.useState(null);a.useEffect(()=>{i()},[]);const i=async()=>{try{d(!0),u(null),m("data_load_ms");const[n,j,g]=await Promise.all([o.listDirectory(""),o.listDirectory("apps"),o.listDirectory("src")]),y=j.filter(s=>s.type==="dir"),N=g.filter(s=>s.type==="dir"),v=n.filter(s=>s.type==="file").length;p("data_load_ms"),h({appCount:y.length,utilCount:N.length,fileCount:v,lastChecked:new Date})}catch(n){u(n.message)}finally{d(!1)}},f=t?`Repository contains ${t.appCount} apps, ${t.utilCount} source modules, and ${t.fileCount} root files. Last checked: ${t.lastChecked.toLocaleString()}`:"";return b?e.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[e.jsxs("div",{className:"bg-white border-b border-neutral-200 px-6 py-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-semibold text-neutral-900 mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-neutral-600",children:"Repository Statistics"})]}),e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:e.jsx("div",{className:"bg-white rounded-2xl border border-neutral-200 shadow-sm p-6",children:e.jsx("p",{className:"text-center text-neutral-500",children:"Loading..."})})})]}):x?e.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[e.jsxs("div",{className:"bg-white border-b border-neutral-200 px-6 py-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-semibold text-neutral-900 mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-neutral-600",children:"Repository Statistics"})]}),e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 shadow-sm p-6",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error: ",x]}),e.jsx("button",{className:"px-4 py-2 bg-brand-600 hover:bg-brand-700 text-white rounded-lg font-medium text-sm transition-colors",onClick:i,children:"Retry"})]})})]}):e.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[e.jsxs("button",{onClick:i,className:"w-full bg-white border-b border-neutral-200 px-6 py-8 text-center hover:bg-neutral-50 transition-colors duration-100",title:"Click to refresh",children:[e.jsx("h1",{className:"text-3xl font-semibold text-neutral-900 mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-neutral-600",children:"Repository Statistics"})]}),e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(c,{title:"Applications",value:t?.appCount||0}),e.jsx(c,{title:"Source Modules",value:t?.utilCount||0}),e.jsx(c,{title:"Root Files",value:t?.fileCount||0})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900 mb-2",children:"Recent Activity"}),e.jsx("p",{className:"text-sm text-neutral-600 leading-relaxed",children:f})]})]})]})}export{_ as default};
