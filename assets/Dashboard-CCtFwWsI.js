import{j as e,u as C,r as a}from"./react-vendor-Bzp8OA_U.js";import{u as S}from"./index-Djuzw2LO.js";import{u as D}from"./usePerformanceMonitor-Chaj6EVO.js";import{A as u}from"./index-C1Xml-4A.js";import"./vendor-7OC5HNn7.js";import"./state-CWLQzQDb.js";function n({title:l,value:s}){return e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 shadow-sm p-6",children:[e.jsx("h3",{className:"text-sm font-medium text-neutral-600 mb-2",children:l}),e.jsx("div",{className:"text-3xl font-semibold text-neutral-900",children:s})]})}function _(){const l=C(),s=S(u.repository.owner,u.repository.name),{startTimer:m,endTimer:h}=D("dashboard"),[t,p]=a.useState(null),[b,c]=a.useState(!0),[d,x]=a.useState(null);a.useEffect(()=>{i()},[]);const i=async()=>{try{c(!0),x(null),m("data_load_ms");const[o,f,N]=await Promise.all([s.listDirectory(""),s.listDirectory("apps"),s.listDirectory("src")]),y=f.filter(r=>r.type==="dir"),v=N.filter(r=>r.type==="dir"),w=o.filter(r=>r.type==="file").length;h("data_load_ms"),p({appCount:y.length,utilCount:v.length,fileCount:w,lastChecked:new Date})}catch(o){x(o.message)}finally{c(!1)}},g=t?`Repository contains ${t.appCount} apps, ${t.utilCount} source modules, and ${t.fileCount} root files. Last checked: ${t.lastChecked.toLocaleString()}`:"",j=()=>{l("/")};return b?e.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[e.jsxs("div",{className:"bg-white border-b border-neutral-200 px-6 py-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-semibold text-neutral-900 mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-neutral-600",children:"Repository Statistics"})]}),e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:e.jsx("div",{className:"bg-white rounded-2xl border border-neutral-200 shadow-sm p-6",children:e.jsx("p",{className:"text-center text-neutral-500",children:"Loading..."})})})]}):d?e.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[e.jsxs("div",{className:"bg-white border-b border-neutral-200 px-6 py-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-semibold text-neutral-900 mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-neutral-600",children:"Repository Statistics"})]}),e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 shadow-sm p-6",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error: ",d]}),e.jsx("button",{className:"px-4 py-2 bg-brand-600 hover:bg-brand-700 text-white rounded-lg font-medium text-sm transition-colors",onClick:i,children:"Retry"})]})})]}):e.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[e.jsxs("button",{onClick:i,className:"w-full bg-white border-b border-neutral-200 px-6 py-8 text-center hover:bg-neutral-50 transition-colors duration-100",title:"Click to refresh",children:[e.jsx("h1",{className:"text-3xl font-semibold text-neutral-900 mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-neutral-600",children:"Repository Statistics"})]}),e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(n,{title:"Applications",value:t?.appCount||0}),e.jsx(n,{title:"Source Modules",value:t?.utilCount||0}),e.jsx(n,{title:"Root Files",value:t?.fileCount||0})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900 mb-2",children:"Recent Activity"}),e.jsx("p",{className:"text-sm text-neutral-600 leading-relaxed",children:g})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{className:"px-5 py-2.5 bg-white hover:bg-neutral-100 border border-neutral-300 text-neutral-700 rounded-lg font-medium text-sm transition-colors",onClick:j,children:"‚Üê Back to Gallery"})})]})]})}export{_ as default};
