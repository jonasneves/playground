const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ChatApp-Cw2yxvKx.js","./react-vendor-Cz34A0j2.js","./vendor-7OC5HNn7.js","./state-CWLQzQDb.js","./useLocalStorage-Dd71kNJg.js","./usePerformanceMonitor-CRkjAzvk.js","./CMSApp-TosB6S2z.js","./index-CQvJlCjD.js","./Dashboard-vV2AUddZ.js","./FileBrowser-C82SBMSR.js","./TodoApp-B-lNcA6-.js","./SettingsApp-D-mt51W1.js","./App-Cw-YFTEl.js"])))=>i.map(i=>d[i]);
import{c as j,r as m,u as E,j as e,H as _,R as N,S as A,T as k,L,a as R,N as O,b as P,d as $}from"./react-vendor-Cz34A0j2.js";import{p as C}from"./state-CWLQzQDb.js";import"./vendor-7OC5HNn7.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function l(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(t){if(t.ep)return;t.ep=!0;const r=l(t);fetch(t.href,r)}})();const z="modulepreload",T=function(i,s){return new URL(i,s).href},w={},f=function(s,l,a){let t=Promise.resolve();if(l&&l.length>0){let u=function(c){return Promise.all(c.map(p=>Promise.resolve(p).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};const n=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),d=o?.nonce||o?.getAttribute("nonce");t=u(l.map(c=>{if(c=T(c,a),c in w)return;w[c]=!0;const p=c.endsWith(".css"),x=p?'[rel="stylesheet"]':"";if(a)for(let b=n.length-1;b>=0;b--){const y=n[b];if(y.href===c&&(!p||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${x}`))return;const h=document.createElement("link");if(h.rel=p?"stylesheet":z,p||(h.as="script"),h.crossOrigin="",h.href=c,d&&h.setAttribute("nonce",d),document.head.appendChild(h),p)return new Promise((b,y)=>{h.addEventListener("load",b),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(n){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=n,window.dispatchEvent(o),!o.defaultPrevented)throw n}return t.then(n=>{for(const o of n||[])o.status==="rejected"&&r(o.reason);return s().catch(r)})};function D(i="auth-storage"){return j()(C(s=>({token:null,user:null,isAuthenticated:!1,setAuth:(l,a)=>s({token:l,user:a,isAuthenticated:!0}),logout:()=>{s({token:null,user:null,isAuthenticated:!1}),localStorage.clear(),window.location.href="/"}}),{name:i}))}function I(i=3e5){return j()((s,l)=>({cacheTimeout:i,getCache:(a,t,r)=>{const n=`gh_${a}_${t}_${r}`,o=localStorage.getItem(n);if(!o)return null;try{const d=JSON.parse(o);return Date.now()-d.timestamp>l().cacheTimeout?(localStorage.removeItem(n),null):d}catch{return null}},setCache:(a,t,r,n,o)=>{const d=`gh_${a}_${t}_${r}`;try{localStorage.setItem(d,JSON.stringify({content:n,sha:o,timestamp:Date.now()}))}catch(u){console.warn("Cache storage failed:",u)}},clearCache:(a,t)=>{const r=`gh_${a}_${t}_`;Object.keys(localStorage).filter(o=>o.startsWith(r)).forEach(o=>localStorage.removeItem(o))},invalidateCache:(a,t,r)=>{const n=`gh_${a}_${t}_${r}`;localStorage.removeItem(n)}}))}function M(i="analytics-storage",s={enabled:!0,maxEvents:100}){return j()(C((l,a)=>({events:[],errors:[],metrics:[],track:(t,r={})=>{if(!s.enabled)return;const n={type:t,data:r,timestamp:Date.now()};l(o=>({events:[...o.events.slice(-(s.maxEvents-1)),n]})),console.log("[Analytics]",t,r)},logError:t=>{s.enabled&&(console.error("[Analytics] Error logged:",t),l(r=>({errors:[...r.errors.slice(-99),t]})))},trackMetric:(t,r,n,o)=>{if(!s.enabled)return;const d=o?n>o:!1,u={appName:t,metricName:r,duration:n,timestamp:Date.now(),threshold:o,exceedsThreshold:d};d&&console.warn(`[${t}] ${r} exceeded threshold: ${n.toFixed(2)}ms > ${o}ms`),l(c=>({metrics:[...c.metrics.slice(-999),u]}))},clearMetrics:()=>l({metrics:[]}),clearErrors:()=>l({errors:[]}),getMetricStats:(t,r)=>{const n=a().metrics.filter(u=>u.appName===t&&u.metricName===r);if(n.length===0)return null;const o=n.map(u=>u.duration),d=n.filter(u=>u.exceedsThreshold).length;return{count:n.length,average:o.reduce((u,c)=>u+c,0)/o.length,min:Math.min(...o),max:Math.max(...o),exceedCount:d}}}),{name:i,partialize:l=>({events:l.events.slice(-50),metrics:l.metrics.slice(-100),errors:l.errors.slice(-20)})}))}function V({user:i,onLogout:s,onClearCache:l}){const[a,t]=m.useState(!1),r=m.useRef(null),n=E();m.useEffect(()=>{function c(p){r.current&&!r.current.contains(p.target)&&t(!1)}return document.addEventListener("click",c),()=>document.removeEventListener("click",c)},[]);const o=()=>{confirm("Clear all cached data? Apps will reload from the repository.")&&(l(),window.location.reload())},d=()=>{t(!1),n("/settings")},u=()=>{t(!1),n("/gallery")};return i?e.jsxs("div",{ref:r,className:"fixed top-6 right-6 z-50",children:[e.jsxs("button",{onClick:()=>t(!a),"aria-label":"Open user menu","aria-expanded":a,className:"flex items-center gap-3 bg-white/80 backdrop-blur-md border border-neutral-200 rounded-full px-4 py-2 hover:bg-white transition-all duration-200 shadow-sm",children:[e.jsx("img",{src:i.avatar_url,alt:i.login,loading:"lazy",className:"w-8 h-8 rounded-full ring-2 ring-white"}),e.jsx("span",{className:"text-sm font-medium text-neutral-900",children:i.name||i.login})]}),e.jsxs("div",{className:`absolute top-14 right-0 bg-white border border-neutral-200 rounded-2xl shadow-xl min-w-[200px] overflow-hidden transition-all duration-200 ${a?"opacity-100 visible translate-y-0":"opacity-0 invisible -translate-y-2"}`,children:[e.jsxs("button",{onClick:u,"aria-label":"Go to home",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors",children:[e.jsx(_,{size:16})," Home"]}),e.jsxs("button",{onClick:()=>window.location.reload(),"aria-label":"Refresh page",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors border-t border-neutral-100",children:[e.jsx(N,{size:16})," Refresh"]}),e.jsxs("button",{onClick:d,"aria-label":"Open settings",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors border-t border-neutral-100",children:[e.jsx(A,{size:16})," Settings"]}),e.jsxs("button",{onClick:o,"aria-label":"Clear cache",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors border-t border-neutral-100",children:[e.jsx(k,{size:16})," Clear Cache"]}),e.jsxs("button",{onClick:s,"aria-label":"Log out",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors border-t border-neutral-100",children:[e.jsx(L,{size:16})," Logout"]})]})]}):null}class B extends m.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,l){const a={message:s.message,stack:s.stack,componentStack:l.componentStack||void 0,timestamp:Date.now(),appName:this.props.appName};this.props.onError&&this.props.onError(a),console.error("[ErrorBoundary] Caught error:",a)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:"#ef4444",background:"#fef2f2",borderRadius:"8px",margin:"20px"},children:[e.jsx("h2",{style:{margin:"0 0 12px",fontSize:"1.25rem",fontWeight:600},children:"Something went wrong"}),e.jsx("p",{style:{margin:"0 0 16px",color:"#991b1b",fontSize:"0.875rem"},children:this.state.error?.message||"An unexpected error occurred"}),e.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"8px 16px",background:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:500},children:"Reload Page"})]}):this.props.children}}const v={version:"1.0.0",repository:{owner:"jonasneves",name:"playground"},branding:{title:"Playground",subtitle:"Launch and experiment with apps",theme:{primary:"#6366f1",secondary:"#8b5cf6"}},features:{analytics:!0,errorTracking:!0,serviceWorker:!1,caching:!0},api:{baseUrl:"https://api.github.com/repos",cacheTimeout:3e5},oauth:{serviceUrl:"https://oauth.neevs.io"}},F=D("auth-storage"),U=I(v.api.cacheTimeout),W=M("analytics-storage",{enabled:v.features.analytics,maxEvents:100});function H(){const i=E();return e.jsx("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center px-6",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("h1",{className:"text-6xl font-bold text-neutral-900 mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-neutral-600 mb-8",children:"Page not found"}),e.jsxs("button",{onClick:()=>i("/"),"aria-label":"Return to home page",className:"inline-flex items-center gap-2 px-6 py-3 bg-brand-600 text-white rounded-xl hover:bg-brand-700 transition-colors",children:[e.jsx(_,{size:20}),"Back to home"]})]})})}const K=m.lazy(()=>f(()=>import("./ChatApp-Cw2yxvKx.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),q=m.lazy(()=>f(()=>import("./CMSApp-TosB6S2z.js"),__vite__mapDeps([6,1,2,3,7,5]),import.meta.url)),J=m.lazy(()=>f(()=>import("./Dashboard-vV2AUddZ.js"),__vite__mapDeps([8,1,2,3,7,5]),import.meta.url)),G=m.lazy(()=>f(()=>import("./FileBrowser-C82SBMSR.js"),__vite__mapDeps([9,1,2,3,7,5]),import.meta.url)),Q=m.lazy(()=>f(()=>import("./TodoApp-B-lNcA6-.js"),__vite__mapDeps([10,1,2,3,4]),import.meta.url)),X=m.lazy(()=>f(()=>import("./SettingsApp-D-mt51W1.js"),__vite__mapDeps([11,1,2,3]),import.meta.url));function Y(){return e.jsx("div",{className:"loading",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-5 border-4 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("p",{children:"Loading app..."})]})})}function g({appName:i,children:s}){const l=W(o=>o.logError),{user:a,logout:t}=F(),{clearCache:r}=U(),n=()=>{r(v.repository.owner,v.repository.name)};return e.jsxs(e.Fragment,{children:[e.jsx(V,{user:a,onLogout:t,onClearCache:n}),e.jsx(B,{appName:i,onError:l,children:e.jsx(m.Suspense,{fallback:e.jsx(Y,{}),children:s})})]})}const Z=R([{path:"/",element:e.jsx(O,{to:"/gallery",replace:!0})},{path:"/gallery",lazy:async()=>({Component:(await f(()=>import("./App-Cw-YFTEl.js"),__vite__mapDeps([12,1,2,3]),import.meta.url)).default})},{path:"/apps/chat",element:e.jsx(g,{appName:"chat",children:e.jsx(K,{})})},{path:"/apps/cms",element:e.jsx(g,{appName:"cms",children:e.jsx(q,{})})},{path:"/apps/dashboard",element:e.jsx(g,{appName:"dashboard",children:e.jsx(J,{})})},{path:"/apps/file-browser",element:e.jsx(g,{appName:"file-browser",children:e.jsx(G,{})})},{path:"/apps/todo",element:e.jsx(g,{appName:"todo",children:e.jsx(Q,{})})},{path:"/settings",element:e.jsx(g,{appName:"settings",children:e.jsx(X,{})})},{path:"*",element:e.jsx(H,{})}]),S=document.getElementById("root");if(!S)throw new Error("Root element not found");P.createRoot(S).render(e.jsx(m.StrictMode,{children:e.jsx($,{router:Z})}));export{v as A,V as U,U as a,W as b,F as u};
