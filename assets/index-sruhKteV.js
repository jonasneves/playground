const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ChatApp-CLEr0Xhs.js","./react-vendor-axii0Xj-.js","./vendor-7OC5HNn7.js","./state-CWLQzQDb.js","./useLocalStorage-BMbOBrEE.js","./usePerformanceMonitor-B_jUtpwc.js","./CMSApp-VAyyVElf.js","./index-WV62W352.js","./Dashboard-C_lgUF0j.js","./FileBrowser-DLitcD23.js","./TodoApp-DYgZT6nS.js","./SettingsApp-B-0KjXDn.js"])))=>i.map(i=>d[i]);
import{c as E,r as u,j as e,u as A,H as S,R as P,S as T,T as I,L as D,C as M,A as H,a as C,b as U,N as G,d as F,e as V}from"./react-vendor-axii0Xj-.js";import{p as k}from"./state-CWLQzQDb.js";import"./vendor-7OC5HNn7.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function a(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(t){if(t.ep)return;t.ep=!0;const n=a(t);fetch(t.href,n)}})();function W(l="auth-storage"){return E()(k(r=>({token:null,user:null,isAuthenticated:!1,setAuth:(a,o)=>r({token:a,user:o,isAuthenticated:!0}),logout:()=>{r({token:null,user:null,isAuthenticated:!1}),localStorage.clear(),window.location.href="/"}}),{name:l}))}function B(l=3e5){return E()((r,a)=>({cacheTimeout:l,getCache:(o,t,n)=>{const s=`gh_${o}_${t}_${n}`,i=localStorage.getItem(s);if(!i)return null;try{const c=JSON.parse(i);return Date.now()-c.timestamp>a().cacheTimeout?(localStorage.removeItem(s),null):c}catch{return null}},setCache:(o,t,n,s,i)=>{const c=`gh_${o}_${t}_${n}`;try{localStorage.setItem(c,JSON.stringify({content:s,sha:i,timestamp:Date.now()}))}catch(d){console.warn("Cache storage failed:",d)}},clearCache:(o,t)=>{const n=`gh_${o}_${t}_`;Object.keys(localStorage).filter(i=>i.startsWith(n)).forEach(i=>localStorage.removeItem(i))},invalidateCache:(o,t,n)=>{const s=`gh_${o}_${t}_${n}`;localStorage.removeItem(s)}}))}function q(l="analytics-storage",r={enabled:!0,maxEvents:100}){return E()(k((a,o)=>({events:[],errors:[],metrics:[],track:(t,n={})=>{if(!r.enabled)return;const s={type:t,data:n,timestamp:Date.now()};a(i=>({events:[...i.events.slice(-(r.maxEvents-1)),s]})),console.log("[Analytics]",t,n)},logError:t=>{r.enabled&&(console.error("[Analytics] Error logged:",t),a(n=>({errors:[...n.errors.slice(-99),t]})))},trackMetric:(t,n,s,i)=>{if(!r.enabled)return;const c=i?s>i:!1,d={appName:t,metricName:n,duration:s,timestamp:Date.now(),threshold:i,exceedsThreshold:c};c&&console.warn(`[${t}] ${n} exceeded threshold: ${s.toFixed(2)}ms > ${i}ms`),a(p=>({metrics:[...p.metrics.slice(-999),d]}))},clearMetrics:()=>a({metrics:[]}),clearErrors:()=>a({errors:[]}),getMetricStats:(t,n)=>{const s=o().metrics.filter(d=>d.appName===t&&d.metricName===n);if(s.length===0)return null;const i=s.map(d=>d.duration),c=s.filter(d=>d.exceedsThreshold).length;return{count:s.length,average:i.reduce((d,p)=>d+p,0)/i.length,min:Math.min(...i),max:Math.max(...i),exceedCount:c}}}),{name:l,partialize:a=>({events:a.events.slice(-50),metrics:a.metrics.slice(-100),errors:a.errors.slice(-20)})}))}const L=u.createContext(null);function K({children:l}){const[r,a]=u.useState([]),o=u.useCallback(()=>{a([])},[]);return e.jsx(L.Provider,{value:{customItems:r,setCustomItems:a,clearCustomItems:o},children:l})}function J(){const l=u.useContext(L);if(!l)throw new Error("useUserMenu must be used within UserMenuProvider");return l}function Q({children:l,oauthServiceUrl:r,onAuthChange:a,isAuthenticated:o}){const[t,n]=u.useState(!0),[s,i]=u.useState(!1);return u.useEffect(()=>{const c=document.createElement("script");return c.src=`${r}/github-auth.js?v=${Date.now()}`,c.async=!0,c.onload=()=>{setTimeout(()=>{window.GitHubAuth?i(!0):(console.error("GitHubAuth not available after script load"),n(!1))},100)},c.onerror=()=>{console.error("Failed to load OAuth script"),n(!1)},document.head.appendChild(c),()=>{document.head.contains(c)&&document.head.removeChild(c)}},[r]),u.useEffect(()=>{if(s)if(window.GitHubAuth.isAuthenticated()){const c=window.GitHubAuth.getUser(),d=window.GitHubAuth.getToken();c&&d&&setTimeout(()=>{a(d,c),n(!1)},0)}else window.GitHubAuth.init({scope:"repo",onLogin:c=>{const d=window.GitHubAuth.getUser();d&&setTimeout(()=>{a(c,d),n(!1)},0)}}),n(!1)},[s,a]),t?e.jsx("div",{className:"loading",children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{border:"4px solid rgba(255,255,255,0.3)",borderRadius:"50%",borderTopColor:"white",width:"50px",height:"50px",animation:"spin 1s linear infinite",margin:"0 auto 20px"}}),e.jsx("p",{children:"Initializing..."})]})}):o?e.jsx(e.Fragment,{children:l}):e.jsx("div",{className:"loading",children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("h2",{children:"Authentication Required"}),e.jsx("p",{style:{marginTop:16,marginBottom:24,opacity:.9},children:"Please sign in with GitHub to access the gallery"}),e.jsx("button",{onClick:()=>window.GitHubAuth.login(),style:{background:"linear-gradient(135deg, #1e3a5f 0%, #2c4f7c 100%)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Sign in with GitHub"})]})})}function N({user:l,onLogout:r,onClearCache:a}){const[o,t]=u.useState(!1),n=u.useRef(null),s=A(),{customItems:i}=J();u.useEffect(()=>{function m(f){n.current&&!n.current.contains(f.target)&&t(!1)}return document.addEventListener("click",m),()=>document.removeEventListener("click",m)},[]);const c=()=>{confirm("Clear all cached data? Apps will reload from the repository.")&&(a(),window.location.reload())},d=()=>{t(!1),s("/settings")},p=()=>{s("/gallery"),t(!1)};return l?e.jsxs("div",{ref:n,className:"fixed top-3 right-3 z-50",children:[e.jsxs("button",{onClick:()=>t(!o),"aria-label":"Open user menu","aria-expanded":o,className:"group flex items-center gap-0 group-hover:gap-3 bg-white/80 backdrop-blur-md border border-neutral-200 rounded-full p-1 group-hover:pl-1.5 group-hover:pr-6 hover:bg-white transition-all duration-200 shadow-sm overflow-hidden",children:[e.jsx("img",{src:l.avatar_url,alt:l.login,loading:"lazy",className:"w-10 h-10 rounded-full ring-2 ring-white flex-shrink-0"}),e.jsx("span",{className:"text-xs font-medium text-neutral-600 whitespace-nowrap w-0 group-hover:w-auto opacity-0 group-hover:opacity-100 transition-all duration-200",children:l.name?.split(" ")[0]||l.login})]}),e.jsxs("div",{className:`absolute top-14 right-0 bg-white border border-neutral-200 rounded-2xl shadow-xl min-w-[200px] overflow-hidden transition-all duration-100 ${o?"opacity-100 visible translate-y-0":"opacity-0 invisible -translate-y-2"}`,children:[e.jsxs("button",{onClick:p,"aria-label":"Go to app gallery",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors",children:[e.jsx(S,{size:16})," Gallery"]}),e.jsxs("button",{onClick:()=>window.location.reload(),"aria-label":"Refresh page",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors border-t border-neutral-100",children:[e.jsx(P,{size:16})," Refresh"]}),e.jsxs("button",{onClick:d,"aria-label":"Open settings",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors border-t border-neutral-100",children:[e.jsx(T,{size:16})," Settings"]}),i.length>0&&e.jsx(e.Fragment,{children:i.map(m=>m.component?e.jsx("div",{className:"border-t border-neutral-100",children:m.component},m.id):e.jsxs("button",{onClick:()=>{m.onClick(),t(!1)},className:`w-full flex items-center gap-3 px-4 py-3 text-sm transition-colors border-t border-neutral-100 ${m.variant==="danger"?"text-red-600 hover:bg-red-50":"text-neutral-700 hover:bg-neutral-50"}`,children:[m.icon&&e.jsx(m.icon,{size:16}),m.label]},m.id))}),e.jsxs("button",{onClick:c,"aria-label":"Clear cache",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors border-t border-neutral-100",children:[e.jsx(I,{size:16})," Clear Cache"]}),e.jsxs("button",{onClick:r,"aria-label":"Log out",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors border-t border-neutral-100",children:[e.jsx(D,{size:16})," Logout"]})]})]}):null}function X(l,r){if(!l?.minLauncherVersion||!r)return null;const a=r.split(".").map(Number),o=l.minLauncherVersion.split(".").map(Number);for(let t=0;t<3;t++){if(a[t]<o[t])return`Requires launcher v${l.minLauncherVersion}`;if(a[t]>o[t])return null}return null}function Y({appName:l,manifest:r,path:a,onLaunch:o,version:t}){if(!r)return e.jsx("div",{className:"bg-white rounded-2xl border border-neutral-200 shadow-sm overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-neutral-900 mb-2",children:l}),e.jsx("p",{className:"text-neutral-400",children:"Loading..."})]})});const n=X(r,t);return e.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 shadow-sm hover:shadow-md hover:-translate-y-0.5 transition-all duration-150 overflow-hidden group flex flex-col h-full",children:[e.jsx("div",{className:`w-full bg-gradient-to-br from-brand-50 to-neutral-50 flex items-center justify-center ${r.thumbnail?"h-32":"h-20"}`,children:r.thumbnail?e.jsx("img",{src:r.thumbnail,alt:r.name,loading:"lazy",className:"w-full h-full object-cover",onError:s=>{s.currentTarget.style.display="none"}}):e.jsx("div",{className:"text-4xl text-neutral-400",children:r.name.charAt(0)})}),e.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[e.jsx("h3",{className:"text-base font-semibold text-neutral-900 mb-1",children:r.name}),e.jsx("p",{className:"text-neutral-600 text-xs leading-relaxed mb-3 line-clamp-2",children:r.description}),n&&e.jsxs("div",{className:"flex items-center gap-1.5 text-amber-600 text-xs mb-3 bg-amber-50 px-2 py-1.5 rounded",children:[e.jsx(M,{size:12}),e.jsx("span",{className:"text-[10px]",children:n})]}),r.tech&&r.tech.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:r.tech.map(s=>e.jsx("span",{className:"bg-neutral-100 text-neutral-700 px-2 py-0.5 rounded-full text-[10px] font-medium",children:s},s))}),e.jsxs("button",{onClick:()=>o(a,r.name),"aria-label":`Launch ${r.name} app`,className:"inline-flex items-center justify-center gap-1.5 bg-gradient-to-r from-brand-600 to-brand-700 hover:from-brand-700 hover:to-brand-800 text-white px-3 py-2 rounded-lg font-medium text-xs transition-all duration-150 group-hover:gap-2 mt-auto",children:["Launch App",e.jsx(H,{size:14,className:"transition-transform duration-150"})]})]})]})}function Z({config:l,user:r,onLogout:a,onClearCache:o,onTrack:t,onNavigate:n}){const[s,i]=u.useState([]),[c,d]=u.useState(!0),[p,m]=u.useState(null);u.useEffect(()=>{f()},[]);const f=async()=>{try{d(!0);const h=await fetch("/apps-registry.json");if(!h.ok)throw new Error("Failed to load apps registry");const w=(await h.json()).apps.map(y=>({name:y.name,path:y.path,manifest:y.manifest}));i(w),d(!1)}catch(h){m(h.message),d(!1)}},x=u.useCallback((h,b)=>{t?.("app_launch",{appName:b,appPath:h});const w=s.find(y=>y.path===h)?.manifest;w?.reactRoute&&n&&n(w.reactRoute)},[s,t,n]);return c&&s.length===0?e.jsxs("div",{className:"relative min-h-screen",children:[e.jsx("div",{className:"fixed top-[70%] left-[75%] -translate-x-1/2 -translate-y-1/2 w-[300px] h-[300px] sm:w-[600px] sm:h-[600px] rounded-full bg-brand-500 blur-[100px] sm:blur-[150px] opacity-40 animate-breathe pointer-events-none"}),e.jsx(N,{user:r,onLogout:a,onClearCache:o}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("header",{className:"py-16 sm:py-24 text-center",children:[e.jsxs("h1",{className:"text-4xl sm:text-5xl font-semibold text-neutral-900 flex items-center justify-center gap-3 mb-3",children:[e.jsx(C,{className:"text-brand-600",size:40}),l.branding.title]}),e.jsx("p",{className:"text-lg text-neutral-600 max-w-2xl mx-auto px-4",children:l.branding.subtitle})]}),e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-neutral-200 border-t-brand-600 rounded-full animate-[spin_1s_linear_infinite]"}),e.jsx("p",{className:"text-neutral-600",children:"Loading applications..."})]})})]})]}):p?e.jsxs("div",{className:"relative min-h-screen",children:[e.jsx(N,{user:r,onLogout:a,onClearCache:o}),e.jsx("div",{className:"container py-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-800 rounded-xl p-6",children:[e.jsx("strong",{className:"font-semibold",children:"Error:"})," ",p]})})]}):e.jsxs("div",{className:"relative min-h-screen",children:[e.jsx("div",{className:"fixed top-[70%] left-[75%] -translate-x-1/2 -translate-y-1/2 w-[300px] h-[300px] sm:w-[600px] sm:h-[600px] rounded-full bg-brand-500 blur-[100px] sm:blur-[150px] opacity-40 animate-breathe pointer-events-none"}),e.jsx(N,{user:r,onLogout:a,onClearCache:o}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("header",{className:"py-16 sm:py-24 text-center",children:[e.jsxs("h1",{className:"text-4xl sm:text-5xl font-semibold text-neutral-900 flex items-center justify-center gap-3 mb-3",children:[e.jsx(C,{className:"text-brand-600",size:40}),l.branding.title]}),e.jsx("p",{className:"text-lg text-neutral-600 max-w-2xl mx-auto px-4",children:l.branding.subtitle})]}),e.jsx("div",{className:"container pb-20",children:e.jsx("div",{className:"grid",children:s.map(h=>e.jsx(Y,{appName:h.name,manifest:h.manifest,path:h.path,onLaunch:x},h.name))})})]})]})}class ee extends u.Component{constructor(r){super(r),this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,a){const o={message:r.message,stack:r.stack,componentStack:a.componentStack||void 0,timestamp:Date.now(),appName:this.props.appName};this.props.onError&&this.props.onError(o),console.error("[ErrorBoundary] Caught error:",o)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:"#ef4444",background:"#fef2f2",borderRadius:"8px",margin:"20px"},children:[e.jsx("h2",{style:{margin:"0 0 12px",fontSize:"1.25rem",fontWeight:600},children:"Something went wrong"}),e.jsx("p",{style:{margin:"0 0 16px",color:"#991b1b",fontSize:"0.875rem"},children:this.state.error?.message||"An unexpected error occurred"}),e.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"8px 16px",background:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:500},children:"Reload Page"})]}):this.props.children}}const te="modulepreload",re=function(l,r){return new URL(l,r).href},_={},v=function(r,a,o){let t=Promise.resolve();if(a&&a.length>0){let d=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const s=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),c=i?.nonce||i?.getAttribute("nonce");t=d(a.map(p=>{if(p=re(p,o),p in _)return;_[p]=!0;const m=p.endsWith(".css"),f=m?'[rel="stylesheet"]':"";if(o)for(let h=s.length-1;h>=0;h--){const b=s[h];if(b.href===p&&(!m||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${f}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":te,m||(x.as="script"),x.crossOrigin="",x.href=p,c&&x.setAttribute("nonce",c),document.head.appendChild(x),m)return new Promise((h,b)=>{x.addEventListener("load",h),x.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${p}`)))})}))}function n(s){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s}return t.then(s=>{for(const i of s||[])i.status==="rejected"&&n(i.reason);return r().catch(n)})},g={version:"1.0.0",repository:{owner:"jonasneves",name:"playground"},branding:{title:"Playground",subtitle:"Launch and experiment with apps",theme:{primary:"#1e3a5f",secondary:"#2c4f7c"}},features:{analytics:!0,errorTracking:!0,serviceWorker:!1,caching:!0},api:{baseUrl:"https://api.github.com/repos",cacheTimeout:3e5},oauth:{serviceUrl:"https://oauth.neevs.io"}},R=W("auth-storage"),z=B(g.api.cacheTimeout),$=q("analytics-storage",{enabled:g.features.analytics,maxEvents:100});function ne(){const l=A();return e.jsx("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center px-6",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("h1",{className:"text-6xl font-bold text-neutral-900 mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-neutral-600 mb-8",children:"Page not found"}),e.jsxs("button",{onClick:()=>l("/"),"aria-label":"Return to home page",className:"inline-flex items-center gap-2 px-6 py-3 bg-brand-600 text-white rounded-xl hover:bg-brand-700 transition-colors",children:[e.jsx(S,{size:20}),"Back to home"]})]})})}function se(){const l=A(),{user:r,token:a,isAuthenticated:o,setAuth:t,logout:n}=R(),{clearCache:s}=z(),{track:i}=$();return e.jsx(Q,{oauthServiceUrl:g.oauth.serviceUrl,onAuthChange:(c,d)=>{c&&d&&t(c,d)},isAuthenticated:o,children:e.jsx(Z,{config:g,user:r,token:a,onLogout:n,onClearCache:()=>s(g.repository.owner,g.repository.name),onTrack:i,onNavigate:c=>l(c)})})}const ae=u.lazy(()=>v(()=>import("./ChatApp-CLEr0Xhs.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),oe=u.lazy(()=>v(()=>import("./CMSApp-VAyyVElf.js"),__vite__mapDeps([6,1,2,3,7,5]),import.meta.url)),ie=u.lazy(()=>v(()=>import("./Dashboard-C_lgUF0j.js"),__vite__mapDeps([8,1,2,3,7,5]),import.meta.url)),le=u.lazy(()=>v(()=>import("./FileBrowser-DLitcD23.js"),__vite__mapDeps([9,1,2,3,7,5]),import.meta.url)),ce=u.lazy(()=>v(()=>import("./TodoApp-DYgZT6nS.js"),__vite__mapDeps([10,1,2,3,4]),import.meta.url)),de=u.lazy(()=>v(()=>import("./SettingsApp-B-0KjXDn.js"),__vite__mapDeps([11,1,2,3]),import.meta.url));function ue(){return e.jsx("div",{className:"loading",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-5 border-4 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("p",{children:"Loading app..."})]})})}function j({appName:l,children:r}){const a=$(i=>i.logError),{user:o,logout:t}=R(),{clearCache:n}=z(),s=()=>{n(g.repository.owner,g.repository.name)};return e.jsxs(e.Fragment,{children:[e.jsx(N,{user:o,onLogout:t,onClearCache:s}),e.jsx(ee,{appName:l,onError:a,children:e.jsx(u.Suspense,{fallback:e.jsx(ue,{}),children:r})})]})}const me=U([{path:"/",element:e.jsx(G,{to:"/gallery",replace:!0})},{path:"/gallery",element:e.jsx(se,{})},{path:"/apps/chat",element:e.jsx(j,{appName:"chat",children:e.jsx(ae,{})})},{path:"/apps/cms",element:e.jsx(j,{appName:"cms",children:e.jsx(oe,{})})},{path:"/apps/dashboard",element:e.jsx(j,{appName:"dashboard",children:e.jsx(ie,{})})},{path:"/apps/file-browser",element:e.jsx(j,{appName:"file-browser",children:e.jsx(le,{})})},{path:"/apps/todo",element:e.jsx(j,{appName:"todo",children:e.jsx(ce,{})})},{path:"/settings",element:e.jsx(j,{appName:"settings",children:e.jsx(de,{})})},{path:"*",element:e.jsx(ne,{})}]),O=document.getElementById("root");if(!O)throw new Error("Root element not found");F.createRoot(O).render(e.jsx(u.StrictMode,{children:e.jsx(K,{children:e.jsx(V,{router:me})})}));export{g as A,J as a,z as b,$ as c,R as u};
