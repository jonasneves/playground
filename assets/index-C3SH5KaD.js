const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ChatApp-CUhKnbdR.js","./react-vendor-Cz34A0j2.js","./vendor-7OC5HNn7.js","./state-CWLQzQDb.js","./useLocalStorage-Dd71kNJg.js","./usePerformanceMonitor-fwDuWOmk.js","./CMSApp-DdnHHjI0.js","./index-CUMjAJKV.js","./Dashboard-bHnNKTfk.js","./FileBrowser-C-8tvQ1Z.js","./TodoApp-C0H-Nlfg.js","./SettingsApp-CXcox8bp.js","./App-V5nDFFMe.js"])))=>i.map(i=>d[i]);
import{c as w,r as p,j as e,u as E,H as _,R as k,S as A,T as L,L as P,a as R,N as O,b as $,d as z}from"./react-vendor-Cz34A0j2.js";import{p as C}from"./state-CWLQzQDb.js";import"./vendor-7OC5HNn7.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function a(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(t){if(t.ep)return;t.ep=!0;const r=a(t);fetch(t.href,r)}})();function I(i="auth-storage"){return w()(C(s=>({token:null,user:null,isAuthenticated:!1,setAuth:(a,l)=>s({token:a,user:l,isAuthenticated:!0}),logout:()=>{s({token:null,user:null,isAuthenticated:!1}),localStorage.clear(),window.location.href="/"}}),{name:i}))}function T(i=3e5){return w()((s,a)=>({cacheTimeout:i,getCache:(l,t,r)=>{const n=`gh_${l}_${t}_${r}`,o=localStorage.getItem(n);if(!o)return null;try{const m=JSON.parse(o);return Date.now()-m.timestamp>a().cacheTimeout?(localStorage.removeItem(n),null):m}catch{return null}},setCache:(l,t,r,n,o)=>{const m=`gh_${l}_${t}_${r}`;try{localStorage.setItem(m,JSON.stringify({content:n,sha:o,timestamp:Date.now()}))}catch(d){console.warn("Cache storage failed:",d)}},clearCache:(l,t)=>{const r=`gh_${l}_${t}_`;Object.keys(localStorage).filter(o=>o.startsWith(r)).forEach(o=>localStorage.removeItem(o))},invalidateCache:(l,t,r)=>{const n=`gh_${l}_${t}_${r}`;localStorage.removeItem(n)}}))}function D(i="analytics-storage",s={enabled:!0,maxEvents:100}){return w()(C((a,l)=>({events:[],errors:[],metrics:[],track:(t,r={})=>{if(!s.enabled)return;const n={type:t,data:r,timestamp:Date.now()};a(o=>({events:[...o.events.slice(-(s.maxEvents-1)),n]})),console.log("[Analytics]",t,r)},logError:t=>{s.enabled&&(console.error("[Analytics] Error logged:",t),a(r=>({errors:[...r.errors.slice(-99),t]})))},trackMetric:(t,r,n,o)=>{if(!s.enabled)return;const m=o?n>o:!1,d={appName:t,metricName:r,duration:n,timestamp:Date.now(),threshold:o,exceedsThreshold:m};m&&console.warn(`[${t}] ${r} exceeded threshold: ${n.toFixed(2)}ms > ${o}ms`),a(u=>({metrics:[...u.metrics.slice(-999),d]}))},clearMetrics:()=>a({metrics:[]}),clearErrors:()=>a({errors:[]}),getMetricStats:(t,r)=>{const n=l().metrics.filter(d=>d.appName===t&&d.metricName===r);if(n.length===0)return null;const o=n.map(d=>d.duration),m=n.filter(d=>d.exceedsThreshold).length;return{count:n.length,average:o.reduce((d,u)=>d+u,0)/o.length,min:Math.min(...o),max:Math.max(...o),exceedCount:m}}}),{name:i,partialize:a=>({events:a.events.slice(-50),metrics:a.metrics.slice(-100),errors:a.errors.slice(-20)})}))}const N=p.createContext(null);function M({children:i}){const[s,a]=p.useState([]),l=p.useCallback(()=>{a([])},[]);return e.jsx(N.Provider,{value:{customItems:s,setCustomItems:a,clearCustomItems:l},children:i})}function U(){const i=p.useContext(N);if(!i)throw new Error("useUserMenu must be used within UserMenuProvider");return i}function F({user:i,onLogout:s,onClearCache:a}){const[l,t]=p.useState(!1),r=p.useRef(null),n=E(),{customItems:o}=U();p.useEffect(()=>{function c(f){r.current&&!r.current.contains(f.target)&&t(!1)}return document.addEventListener("click",c),()=>document.removeEventListener("click",c)},[]);const m=()=>{confirm("Clear all cached data? Apps will reload from the repository.")&&(a(),window.location.reload())},d=()=>{t(!1),n("/settings")},u=()=>{t(!1),n("/gallery")};return i?e.jsxs("div",{ref:r,className:"fixed top-4 right-4 z-50",children:[e.jsxs("button",{onClick:()=>t(!l),"aria-label":"Open user menu","aria-expanded":l,className:"group flex items-center gap-0 group-hover:gap-3 bg-white/80 backdrop-blur-md border border-neutral-200 rounded-full p-1 group-hover:pl-1.5 group-hover:pr-6 hover:bg-white transition-all duration-200 shadow-sm overflow-hidden",children:[e.jsx("img",{src:i.avatar_url,alt:i.login,loading:"lazy",className:"w-10 h-10 rounded-full ring-2 ring-white flex-shrink-0"}),e.jsx("span",{className:"text-xs font-medium text-neutral-600 whitespace-nowrap w-0 group-hover:w-auto opacity-0 group-hover:opacity-100 transition-all duration-200",children:i.name||i.login})]}),e.jsxs("div",{className:`absolute top-14 right-0 bg-white border border-neutral-200 rounded-2xl shadow-xl min-w-[200px] overflow-hidden transition-all duration-100 ${l?"opacity-100 visible translate-y-0":"opacity-0 invisible -translate-y-2"}`,children:[e.jsxs("button",{onClick:u,"aria-label":"Go to app gallery",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors",children:[e.jsx(_,{size:16})," Gallery"]}),e.jsxs("button",{onClick:()=>window.location.reload(),"aria-label":"Refresh page",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors border-t border-neutral-100",children:[e.jsx(k,{size:16})," Refresh"]}),e.jsxs("button",{onClick:d,"aria-label":"Open settings",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors border-t border-neutral-100",children:[e.jsx(A,{size:16})," Settings"]}),o.length>0&&e.jsx(e.Fragment,{children:o.map(c=>c.component?e.jsx("div",{className:"border-t border-neutral-100",children:c.component},c.id):e.jsxs("button",{onClick:()=>{c.onClick(),t(!1)},className:`w-full flex items-center gap-3 px-4 py-3 text-sm transition-colors border-t border-neutral-100 ${c.variant==="danger"?"text-red-600 hover:bg-red-50":"text-neutral-700 hover:bg-neutral-50"}`,children:[c.icon&&e.jsx(c.icon,{size:16}),c.label]},c.id))}),e.jsxs("button",{onClick:m,"aria-label":"Clear cache",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-neutral-700 hover:bg-neutral-50 transition-colors border-t border-neutral-100",children:[e.jsx(L,{size:16})," Clear Cache"]}),e.jsxs("button",{onClick:s,"aria-label":"Log out",className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors border-t border-neutral-100",children:[e.jsx(P,{size:16})," Logout"]})]})]}):null}class V extends p.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,a){const l={message:s.message,stack:s.stack,componentStack:a.componentStack||void 0,timestamp:Date.now(),appName:this.props.appName};this.props.onError&&this.props.onError(l),console.error("[ErrorBoundary] Caught error:",l)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:"#ef4444",background:"#fef2f2",borderRadius:"8px",margin:"20px"},children:[e.jsx("h2",{style:{margin:"0 0 12px",fontSize:"1.25rem",fontWeight:600},children:"Something went wrong"}),e.jsx("p",{style:{margin:"0 0 16px",color:"#991b1b",fontSize:"0.875rem"},children:this.state.error?.message||"An unexpected error occurred"}),e.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"8px 16px",background:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:500},children:"Reload Page"})]}):this.props.children}}const B="modulepreload",W=function(i,s){return new URL(i,s).href},j={},g=function(s,a,l){let t=Promise.resolve();if(a&&a.length>0){let d=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const n=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),m=o?.nonce||o?.getAttribute("nonce");t=d(a.map(u=>{if(u=W(u,l),u in j)return;j[u]=!0;const c=u.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(l)for(let b=n.length-1;b>=0;b--){const v=n[b];if(v.href===u&&(!c||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":B,c||(h.as="script"),h.crossOrigin="",h.href=u,m&&h.setAttribute("nonce",m),document.head.appendChild(h),c)return new Promise((b,v)=>{h.addEventListener("load",b),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(n){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=n,window.dispatchEvent(o),!o.defaultPrevented)throw n}return t.then(n=>{for(const o of n||[])o.status==="rejected"&&r(o.reason);return s().catch(r)})},y={version:"1.0.0",repository:{owner:"jonasneves",name:"playground"},branding:{title:"Playground",subtitle:"Launch and experiment with apps",theme:{primary:"#1e3a5f",secondary:"#2c4f7c"}},features:{analytics:!0,errorTracking:!0,serviceWorker:!1,caching:!0},api:{baseUrl:"https://api.github.com/repos",cacheTimeout:3e5},oauth:{serviceUrl:"https://oauth.neevs.io"}},H=I("auth-storage"),K=T(y.api.cacheTimeout),q=D("analytics-storage",{enabled:y.features.analytics,maxEvents:100});function G(){const i=E();return e.jsx("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center px-6",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("h1",{className:"text-6xl font-bold text-neutral-900 mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-neutral-600 mb-8",children:"Page not found"}),e.jsxs("button",{onClick:()=>i("/"),"aria-label":"Return to home page",className:"inline-flex items-center gap-2 px-6 py-3 bg-brand-600 text-white rounded-xl hover:bg-brand-700 transition-colors",children:[e.jsx(_,{size:20}),"Back to home"]})]})})}const J=p.lazy(()=>g(()=>import("./ChatApp-CUhKnbdR.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),Q=p.lazy(()=>g(()=>import("./CMSApp-DdnHHjI0.js"),__vite__mapDeps([6,1,2,3,7,5]),import.meta.url)),X=p.lazy(()=>g(()=>import("./Dashboard-bHnNKTfk.js"),__vite__mapDeps([8,1,2,3,7,5]),import.meta.url)),Y=p.lazy(()=>g(()=>import("./FileBrowser-C-8tvQ1Z.js"),__vite__mapDeps([9,1,2,3,7,5]),import.meta.url)),Z=p.lazy(()=>g(()=>import("./TodoApp-C0H-Nlfg.js"),__vite__mapDeps([10,1,2,3,4]),import.meta.url)),ee=p.lazy(()=>g(()=>import("./SettingsApp-CXcox8bp.js"),__vite__mapDeps([11,1,2,3]),import.meta.url));function te(){return e.jsx("div",{className:"loading",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-5 border-4 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("p",{children:"Loading app..."})]})})}function x({appName:i,children:s}){const a=q(o=>o.logError),{user:l,logout:t}=H(),{clearCache:r}=K(),n=()=>{r(y.repository.owner,y.repository.name)};return e.jsxs(e.Fragment,{children:[e.jsx(F,{user:l,onLogout:t,onClearCache:n}),e.jsx(V,{appName:i,onError:a,children:e.jsx(p.Suspense,{fallback:e.jsx(te,{}),children:s})})]})}const re=R([{path:"/",element:e.jsx(O,{to:"/gallery",replace:!0})},{path:"/gallery",lazy:async()=>({Component:(await g(()=>import("./App-V5nDFFMe.js"),__vite__mapDeps([12,1,2,3]),import.meta.url)).default})},{path:"/apps/chat",element:e.jsx(x,{appName:"chat",children:e.jsx(J,{})})},{path:"/apps/cms",element:e.jsx(x,{appName:"cms",children:e.jsx(Q,{})})},{path:"/apps/dashboard",element:e.jsx(x,{appName:"dashboard",children:e.jsx(X,{})})},{path:"/apps/file-browser",element:e.jsx(x,{appName:"file-browser",children:e.jsx(Y,{})})},{path:"/apps/todo",element:e.jsx(x,{appName:"todo",children:e.jsx(Z,{})})},{path:"/settings",element:e.jsx(x,{appName:"settings",children:e.jsx(ee,{})})},{path:"*",element:e.jsx(G,{})}]),S=document.getElementById("root");if(!S)throw new Error("Root element not found");$.createRoot(S).render(e.jsx(p.StrictMode,{children:e.jsx(M,{children:e.jsx(z,{router:re})})}));export{y as A,F as U,U as a,K as b,q as c,H as u};
