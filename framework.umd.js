(function(T,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],l):(T=typeof globalThis<"u"?globalThis:T||self,l(T.PrototypeGalleryFramework={},T.React))})(this,(function(T,l){"use strict";const K=t=>{let r;const i=new Set,s=(y,b)=>{const j=typeof y=="function"?y(r):y;if(!Object.is(j,r)){const _=r;r=b??(typeof j!="object"||j===null)?j:Object.assign({},r,j),i.forEach(x=>x(r,_))}},n=()=>r,u={setState:s,getState:n,getInitialState:()=>d,subscribe:y=>(i.add(y),()=>i.delete(y))},d=r=t(s,n,u);return u},de=(t=>t?K(t):K),fe=t=>t;function he(t,r=fe){const i=l.useSyncExternalStore(t.subscribe,l.useCallback(()=>r(t.getState()),[t,r]),l.useCallback(()=>r(t.getInitialState()),[t,r]));return l.useDebugValue(i),i}const Z=t=>{const r=de(t),i=s=>he(r,s);return Object.assign(i,r),i},G=(t=>t?Z(t):Z);function me(t,r){let i;try{i=t()}catch{return}return{getItem:n=>{var a;const c=d=>d===null?null:JSON.parse(d,void 0),u=(a=i.getItem(n))!=null?a:null;return u instanceof Promise?u.then(c):c(u)},setItem:(n,a)=>i.setItem(n,JSON.stringify(a,void 0)),removeItem:n=>i.removeItem(n)}}const q=t=>r=>{try{const i=t(r);return i instanceof Promise?i:{then(s){return q(s)(i)},catch(s){return this}}}catch(i){return{then(s){return this},catch(s){return q(s)(i)}}}},pe=(t,r)=>(i,s,n)=>{let a={storage:me(()=>localStorage),partialize:p=>p,version:0,merge:(p,O)=>({...O,...p}),...r},c=!1,u=0;const d=new Set,y=new Set;let b=a.storage;if(!b)return t((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),i(...p)},s,n);const j=()=>{const p=a.partialize({...s()});return b.setItem(a.name,{state:p,version:a.version})},_=n.setState;n.setState=(p,O)=>(_(p,O),j());const x=t((...p)=>(i(...p),j()),s,n);n.getInitialState=()=>x;let S;const R=()=>{var p,O;if(!b)return;const $=++u;c=!1,d.forEach(f=>{var g;return f((g=s())!=null?g:x)});const h=((O=a.onRehydrateStorage)==null?void 0:O.call(a,(p=s())!=null?p:x))||void 0;return q(b.getItem.bind(b))(a.name).then(f=>{if(f)if(typeof f.version=="number"&&f.version!==a.version){if(a.migrate){const g=a.migrate(f.state,f.version);return g instanceof Promise?g.then(A=>[!0,A]):[!0,g]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,f.state];return[!1,void 0]}).then(f=>{var g;if($!==u)return;const[A,I]=f;if(S=a.merge(I,(g=s())!=null?g:x),i(S,!0),A)return j()}).then(()=>{$===u&&(h?.(S,void 0),S=s(),c=!0,y.forEach(f=>f(S)))}).catch(f=>{$===u&&h?.(void 0,f)})};return n.persist={setOptions:p=>{a={...a,...p},p.storage&&(b=p.storage)},clearStorage:()=>{b?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>R(),hasHydrated:()=>c,onHydrate:p=>(d.add(p),()=>{d.delete(p)}),onFinishHydration:p=>(y.add(p),()=>{y.delete(p)})},a.skipHydration||R(),S||x};function ge(t="auth-storage"){return G()(pe(r=>({token:null,user:null,isAuthenticated:!1,setAuth:(i,s)=>r({token:i,user:s,isAuthenticated:!0}),logout:()=>{r({token:null,user:null,isAuthenticated:!1}),localStorage.clear(),window.location.href="/"}}),{name:t}))}function ye(t=3e5){return G()((r,i)=>({cacheTimeout:t,getCache:(s,n,a)=>{const c=`gh_${s}_${n}_${a}`,u=localStorage.getItem(c);if(!u)return null;try{const d=JSON.parse(u);return Date.now()-d.timestamp>i().cacheTimeout?(localStorage.removeItem(c),null):d}catch{return null}},setCache:(s,n,a,c,u)=>{const d=`gh_${s}_${n}_${a}`;try{localStorage.setItem(d,JSON.stringify({content:c,sha:u,timestamp:Date.now()}))}catch(y){console.warn("Cache storage failed:",y)}},clearCache:(s,n)=>{const a=`gh_${s}_${n}_`;Object.keys(localStorage).filter(u=>u.startsWith(a)).forEach(u=>localStorage.removeItem(u))},invalidateCache:(s,n,a)=>{const c=`gh_${s}_${n}_${a}`;localStorage.removeItem(c)}}))}function be(t={enabled:!0,maxEvents:100}){return G()((r,i)=>({events:[],errors:[],metrics:[],track:(s,n={})=>{if(!t.enabled)return;const a={type:s,data:n,timestamp:Date.now()};r(c=>({events:[...c.events.slice(-(t.maxEvents-1)),a]})),console.log("[Analytics]",s,n)},logError:s=>{t.enabled&&(r(n=>({errors:[...n.errors.slice(-49),s]})),console.error("[Error]",s))},trackMetric:(s,n,a)=>{if(!t.enabled)return;const c={app:s,metric:n,value:a,timestamp:Date.now()};r(u=>({metrics:[...u.metrics.slice(-199),c]}))},getMetrics:s=>i().metrics.filter(n=>n.app===s)}))}function ve(t,r){return function(s,n){const a=t.token,{getCache:c,setCache:u,invalidateCache:d}=r,y=`https://api.github.com/repos/${s}/${n}`,b=l.useCallback(h=>btoa(unescape(encodeURIComponent(h))),[]),j=l.useCallback(h=>decodeURIComponent(escape(atob(h))),[]),_=l.useCallback(async(h,f={})=>{const g=await fetch(`${y}/contents/${h}`,{...f,headers:{Authorization:`Bearer ${a}`,Accept:"application/vnd.github.v3+json",...f.headers}});if(!g.ok)throw g.status===401?(t.logout(),new Error("Authentication expired")):new Error(`Failed to ${f.method||"fetch"} ${h}: ${g.statusText}`);return g.json()},[y,a]),x=l.useCallback(async h=>{const f=c(s,n,h);if(f)return{content:f.content,sha:f.sha,path:h};const g=await _(h),A={content:j(g.content),sha:g.sha,path:g.path,name:g.name,size:g.size};return u(s,n,h,A.content,A.sha),A},[s,n,c,u,_,j]),S=l.useCallback(async(h,f,g,A)=>{const I=await _(h,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:A||`Update ${h}`,content:b(f),sha:g})});return d(s,n,h),I},[s,n,_,b,d]),R=l.useCallback(async(h,f,g)=>_(h,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:g||`Create ${h}`,content:b(f)})}),[_,b]),p=l.useCallback(async(h,f,g)=>{const A=await _(h,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:g||`Delete ${h}`,sha:f})});return d(s,n,h),A},[s,n,_,d]),O=l.useCallback(async(h="")=>_(h),[_]),$=l.useCallback(async h=>{try{const f=await x(`${h}/manifest.json`);return JSON.parse(f.content)}catch{return null}},[x]);return{getFile:x,updateFile:S,createFile:R,deleteFile:p,listDirectory:O,getManifest:$,encodeContent:b,decodeContent:j}}}var J={exports:{}},D={};var Q;function xe(){if(Q)return D;Q=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(s,n,a){var c=null;if(a!==void 0&&(c=""+a),n.key!==void 0&&(c=""+n.key),"key"in n){a={};for(var u in n)u!=="key"&&(a[u]=n[u])}else a=n;return n=a.ref,{$$typeof:t,type:s,key:c,ref:n!==void 0?n:null,props:a}}return D.Fragment=r,D.jsx=i,D.jsxs=i,D}var z={};var ee;function je(){return ee||(ee=1,process.env.NODE_ENV!=="production"&&(function(){function t(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===N?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case p:return"Fragment";case $:return"Profiler";case O:return"StrictMode";case A:return"Suspense";case I:return"SuspenseList";case L:return"Activity"}if(typeof e=="object")switch(typeof e.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),e.$$typeof){case R:return"Portal";case f:return e.displayName||"Context";case h:return(e._context.displayName||"Context")+".Consumer";case g:var m=e.render;return e=e.displayName,e||(e=m.displayName||m.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k:return m=e.displayName||null,m!==null?m:t(e.type)||"Memo";case C:m=e._payload,e=e._init;try{return t(e(m))}catch{}}return null}function r(e){return""+e}function i(e){try{r(e);var m=!1}catch{m=!0}if(m){m=console;var v=m.error,w=typeof Symbol=="function"&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object";return v.call(m,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",w),r(e)}}function s(e){if(e===p)return"<>";if(typeof e=="object"&&e!==null&&e.$$typeof===C)return"<...>";try{var m=t(e);return m?"<"+m+">":"<...>"}catch{return"<...>"}}function n(){var e=P.A;return e===null?null:e.getOwner()}function a(){return Error("react-stack-top-frame")}function c(e){if(F.call(e,"key")){var m=Object.getOwnPropertyDescriptor(e,"key").get;if(m&&m.isReactWarning)return!1}return e.key!==void 0}function u(e,m){function v(){oe||(oe=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",m))}v.isReactWarning=!0,Object.defineProperty(e,"key",{get:v,configurable:!0})}function d(){var e=t(this.type);return ie[e]||(ie[e]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),e=this.props.ref,e!==void 0?e:null}function y(e,m,v,w,W,B){var E=v.ref;return e={$$typeof:S,type:e,key:m,props:v,_owner:w},(E!==void 0?E:null)!==null?Object.defineProperty(e,"ref",{enumerable:!1,get:d}):Object.defineProperty(e,"ref",{enumerable:!1,value:null}),e._store={},Object.defineProperty(e._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(e,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(e,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:W}),Object.defineProperty(e,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:B}),Object.freeze&&(Object.freeze(e.props),Object.freeze(e)),e}function b(e,m,v,w,W,B){var E=m.children;if(E!==void 0)if(w)if(U(E)){for(w=0;w<E.length;w++)j(E[w]);Object.freeze&&Object.freeze(E)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else j(E);if(F.call(m,"key")){E=t(e);var H=Object.keys(m).filter(function(Le){return Le!=="key"});w=0<H.length?"{key: someKey, "+H.join(": ..., ")+": ...}":"{key: someKey}",ue[E+w]||(H=0<H.length?"{"+H.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,w,E,H,E),ue[E+w]=!0)}if(E=null,v!==void 0&&(i(v),E=""+v),c(m)&&(i(m.key),E=""+m.key),"key"in m){v={};for(var X in m)X!=="key"&&(v[X]=m[X])}else v=m;return E&&u(v,typeof e=="function"?e.displayName||e.name||"Unknown":e),y(e,E,v,n(),W,B)}function j(e){_(e)?e._store&&(e._store.validated=1):typeof e=="object"&&e!==null&&e.$$typeof===C&&(e._payload.status==="fulfilled"?_(e._payload.value)&&e._payload.value._store&&(e._payload.value._store.validated=1):e._store&&(e._store.validated=1))}function _(e){return typeof e=="object"&&e!==null&&e.$$typeof===S}var x=l,S=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),N=Symbol.for("react.client.reference"),P=x.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=Object.prototype.hasOwnProperty,U=Array.isArray,V=console.createTask?console.createTask:function(){return null};x={react_stack_bottom_frame:function(e){return e()}};var oe,ie={},ce=x.react_stack_bottom_frame.bind(x,a)(),le=V(s(a)),ue={};z.Fragment=p,z.jsx=function(e,m,v){var w=1e4>P.recentlyCreatedOwnerStacks++;return b(e,m,v,!1,w?Error("react-stack-top-frame"):ce,w?V(s(e)):le)},z.jsxs=function(e,m,v){var w=1e4>P.recentlyCreatedOwnerStacks++;return b(e,m,v,!0,w?Error("react-stack-top-frame"):ce,w?V(s(e)):le)}})()),z}var te;function _e(){return te||(te=1,process.env.NODE_ENV==="production"?J.exports=xe():J.exports=je()),J.exports}var o=_e();function ke({children:t,oauthServiceUrl:r,onAuthChange:i,isAuthenticated:s}){const[n,a]=l.useState(!0),[c,u]=l.useState(!1);return l.useEffect(()=>{const d=document.createElement("script");return d.src=`${r}/github-auth.js?v=2`,d.integrity="sha384-yCvoyjf6LKk2Yc6oSRenxRV0yFNdjeQ5ANuXIcRN50VoX/X8S4YJ9mU2+cT9MGW1",d.crossOrigin="anonymous",d.async=!0,d.onload=()=>{u(!0)},d.onerror=()=>{console.error("Failed to load OAuth script"),a(!1)},document.head.appendChild(d),()=>{document.head.removeChild(d)}},[r]),l.useEffect(()=>{if(c)if(window.GitHubAuth.isAuthenticated()){const d=window.GitHubAuth.getUser(),y=window.GitHubAuth.getToken();d&&y&&(i(y,d),a(!1))}else window.GitHubAuth.init({scope:"repo",onLogin:d=>{const y=window.GitHubAuth.getUser();y&&(i(d,y),a(!1))}}),a(!1)},[c,i]),n?o.jsx("div",{className:"loading",children:o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{border:"4px solid rgba(255,255,255,0.3)",borderRadius:"50%",borderTopColor:"white",width:"50px",height:"50px",animation:"spin 1s linear infinite",margin:"0 auto 20px"}}),o.jsx("p",{children:"Initializing..."})]})}):s?o.jsx(o.Fragment,{children:t}):o.jsx("div",{className:"loading",children:o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("h2",{children:"Authentication Required"}),o.jsx("p",{style:{marginTop:16,marginBottom:24,opacity:.9},children:"Please sign in with GitHub to access the gallery"}),o.jsx("button",{onClick:()=>window.GitHubAuth.login(),style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Sign in with GitHub"})]})})}const re=(...t)=>t.filter((r,i,s)=>!!r&&r.trim()!==""&&s.indexOf(r)===i).join(" ").trim();const we=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const Ee=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,i,s)=>s?s.toUpperCase():i.toLowerCase());const ne=t=>{const r=Ee(t);return r.charAt(0).toUpperCase()+r.slice(1)};var Se={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ae=t=>{for(const r in t)if(r.startsWith("aria-")||r==="role"||r==="title")return!0;return!1};const Ce=l.forwardRef(({color:t="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:n="",children:a,iconNode:c,...u},d)=>l.createElement("svg",{ref:d,...Se,width:r,height:r,stroke:t,strokeWidth:s?Number(i)*24/Number(r):i,className:re("lucide",n),...!a&&!Ae(u)&&{"aria-hidden":"true"},...u},[...c.map(([y,b])=>l.createElement(y,b)),...Array.isArray(a)?a:[a]]));const M=(t,r)=>{const i=l.forwardRef(({className:s,...n},a)=>l.createElement(Ce,{ref:a,iconNode:r,className:re(`lucide-${we(ne(t))}`,`lucide-${t}`,s),...n}));return i.displayName=ne(t),i};const Te=M("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const Ne=M("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const Oe=M("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);const $e=M("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const se=M("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);const Re=M("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);function Y({user:t,onLogout:r,onClearCache:i}){const[s,n]=l.useState(!1),a=l.useRef(null);l.useEffect(()=>{function u(d){a.current&&!a.current.contains(d.target)&&n(!1)}return document.addEventListener("click",u),()=>document.removeEventListener("click",u)},[]);const c=()=>{confirm("Clear all cached data? Apps will reload from the repository.")&&(i(),window.location.reload())};return t?o.jsxs("div",{ref:a,style:{position:"relative"},children:[o.jsxs("div",{className:"user-pill",onClick:()=>n(!s),children:[o.jsx("img",{src:t.avatar_url,alt:t.login,className:"user-avatar"}),o.jsx("span",{style:{fontWeight:500,fontSize:"14px"},children:t.name||t.login})]}),o.jsxs("div",{className:`user-menu ${s?"show":""}`,children:[o.jsxs("button",{onClick:()=>window.location.reload(),children:[o.jsx($e,{size:16})," Refresh"]}),o.jsxs("button",{onClick:c,children:[o.jsx(Re,{size:16})," Clear Cache"]}),o.jsxs("button",{onClick:r,children:[o.jsx(Oe,{size:16})," Logout"]})]})]}):null}function Ie(t,r){if(!t?.minLauncherVersion||!r)return null;const i=r.split(".").map(Number),s=t.minLauncherVersion.split(".").map(Number);for(let n=0;n<3;n++){if(i[n]<s[n])return`Requires launcher v${t.minLauncherVersion}`;if(i[n]>s[n])return null}return null}function ae({appName:t,manifest:r,path:i,onLaunch:s,version:n}){if(!r)return o.jsx("div",{className:"app-card",children:o.jsxs("div",{className:"app-card-body",children:[o.jsx("h3",{children:t}),o.jsx("p",{style:{color:"#ccc"},children:"Loading..."})]})});const a=Ie(r,n);return o.jsxs("div",{className:"app-card",children:[r.thumbnail&&o.jsx("img",{src:r.thumbnail,alt:r.name,onError:c=>{c.currentTarget.style.display="none"}}),o.jsxs("div",{className:"app-card-body",children:[o.jsx("h3",{children:r.name}),o.jsx("p",{children:r.description}),a&&o.jsxs("div",{style:{color:"#f59e0b",fontSize:"13px",marginBottom:"12px",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx(Ne,{size:16})," ",a]}),r.tech&&r.tech.length>0&&o.jsx("div",{className:"app-meta",children:r.tech.map(c=>o.jsx("span",{className:"badge",children:c},c))}),o.jsxs("button",{onClick:()=>s(i,r.name),className:"launch-btn",children:["Launch App ",o.jsx(Te,{size:16})]})]})]})}function Pe({config:t,user:r,token:i,useGitHubAPI:s,onLogout:n,onClearCache:a,onTrack:c}){const[u,d]=l.useState([]),[y,b]=l.useState(!0),[j,_]=l.useState(null),[x,S]=l.useState(null),[R,p]=l.useState(!1),[O,$]=l.useState(!1),h=s(t.repository.owner,t.repository.name),f=l.useRef(null);l.useEffect(()=>{g()},[]),l.useEffect(()=>{function k(C){C.key==="Escape"&&x&&I()}return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[x]),l.useEffect(()=>{function k(C){C.data==="close-app"&&I()}return window.addEventListener("message",k),()=>window.removeEventListener("message",k)},[]);const g=async()=>{try{b(!0);const C=(await h.listDirectory("apps")).filter(N=>N.type==="dir"),L=C.map(N=>({name:N.name,path:N.path,manifest:null}));d(L);for(let N=0;N<C.length;N++){await new Promise(F=>setTimeout(F,N*100));const P=await h.getManifest(C[N].path);P&&d(F=>F.map(U=>U.name===C[N].name?{...U,manifest:P}:U))}b(!1)}catch(k){_(k.message),b(!1)}},A=l.useCallback(async(k,C)=>{try{p(!0),S({path:k,name:C}),c?.("app_launch",{appName:C,appPath:k});const L=await h.getFile(`${k}/index.html`),N=`<script>
        window.INJECTED_TOKEN = ${JSON.stringify(i)};
        window.INJECTED_USER = ${JSON.stringify(r)};
        window.PARENT_REPO = window.parent.repo;
      <\/script>`,P=L.content.replace("<head>","<head>"+N);f.current&&(f.current.srcdoc=P,f.current.onload=()=>{p(!1),$(!0),setTimeout(()=>$(!1),3e3)})}catch(L){alert(`Error loading app: ${L.message}`),p(!1),S(null)}},[h,i,r,c]),I=l.useCallback(()=>{S(null),$(!1),f.current&&(f.current.srcdoc="")},[]);return y&&u.length===0?o.jsxs("div",{children:[o.jsx(Y,{user:r,onLogout:n,onClearCache:a}),o.jsxs("div",{style:{background:`linear-gradient(135deg, ${t.branding.theme.primary} 0%, ${t.branding.theme.secondary} 100%)`,color:"white",padding:"48px 20px",textAlign:"center",marginBottom:"48px"},children:[o.jsxs("h1",{style:{margin:"0 0 8px 0",fontSize:"2.5em",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:[o.jsx(se,{size:32})," ",t.branding.title]}),o.jsx("p",{style:{margin:0,opacity:.95,fontSize:"1.05em"},children:t.branding.subtitle})]}),o.jsx("div",{className:"loading",children:o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{border:"4px solid rgba(255,255,255,0.3)",borderRadius:"50%",borderTopColor:"white",width:"50px",height:"50px",animation:"spin 1s linear infinite",margin:"0 auto 20px"}}),o.jsx("p",{children:"Loading applications..."})]})})]}):j?o.jsxs("div",{children:[o.jsx(Y,{user:r,onLogout:n,onClearCache:a}),o.jsxs("div",{className:"error",children:[o.jsx("strong",{children:"Error:"})," ",j]})]}):o.jsxs("div",{children:[o.jsx(Y,{user:r,onLogout:n,onClearCache:a}),o.jsxs("div",{style:{background:`linear-gradient(135deg, ${t.branding.theme.primary} 0%, ${t.branding.theme.secondary} 100%)`,color:"white",padding:"48px 20px",textAlign:"center",marginBottom:"48px"},children:[o.jsxs("h1",{style:{margin:"0 0 8px 0",fontSize:"2.5em",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:[o.jsx(se,{size:32})," ",t.branding.title]}),o.jsx("p",{style:{margin:0,opacity:.95,fontSize:"1.05em"},children:t.branding.subtitle})]}),o.jsx("div",{className:"app-grid",children:u.map(k=>o.jsx(ae,{appName:k.name,manifest:k.manifest,path:k.path,onLaunch:A},k.name))}),x&&o.jsxs(o.Fragment,{children:[o.jsx("iframe",{ref:f,className:"app-frame",style:{display:"block"},title:x.name}),R&&o.jsx("div",{className:"app-loader",style:{display:"flex"},children:o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{border:"4px solid rgba(255,255,255,0.3)",borderRadius:"50%",borderTopColor:"white",width:"50px",height:"50px",animation:"spin 1s linear infinite",margin:"0 auto 20px"}}),o.jsx("p",{children:"Loading app..."})]})}),o.jsx("div",{className:`hint ${O?"visible":""}`,children:"Press ESC to return to gallery"})]})]})}T.AppCard=ae,T.AppShell=Pe,T.OAuth=ke,T.UserMenu=Y,T.createAnalyticsStore=be,T.createAuthStore=ge,T.createCacheStore=ye,T.createGitHubAPIHook=ve,Object.defineProperty(T,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=framework.umd.js.map
